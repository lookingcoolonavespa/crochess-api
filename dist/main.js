/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["croChess"] = factory();
	else
		root["croChess"] = factory();
})(this, function() {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Castle.ts":
/*!***********************!*\
  !*** ./src/Castle.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Castle)\n/* harmony export */ });\nfunction Castle(whiteKingside, whiteQueenside, blackKingside, blackQueenside) {\n  return {\n    white: {\n      kingside: whiteKingside,\n      queenside: whiteQueenside\n    },\n    black: {\n      kingside: blackKingside,\n      queenside: blackQueenside\n    }\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvQ2FzdGxlLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFFYyxTQUFVQSxNQUFWLENBQ1pDLGFBRFksRUFFWkMsY0FGWSxFQUdaQyxhQUhZLEVBSVpDLGNBSlksRUFJVztBQUV2QixTQUFPO0FBQ0xDLFNBQUssRUFBRTtBQUNMQyxjQUFRLEVBQUVMLGFBREw7QUFFTE0sZUFBUyxFQUFFTDtBQUZOLEtBREY7QUFLTE0sU0FBSyxFQUFFO0FBQ0xGLGNBQVEsRUFBRUgsYUFETDtBQUVMSSxlQUFTLEVBQUVIO0FBRk47QUFMRixHQUFQO0FBVUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jcm9DaGVzcy8uL3NyYy9DYXN0bGUudHM/MWNlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYXN0bGVPYmogfSBmcm9tICcuL3R5cGVzL2ludGVyZmFjZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDYXN0bGUoXG4gIHdoaXRlS2luZ3NpZGU6IGJvb2xlYW4sXG4gIHdoaXRlUXVlZW5zaWRlOiBib29sZWFuLFxuICBibGFja0tpbmdzaWRlOiBib29sZWFuLFxuICBibGFja1F1ZWVuc2lkZTogYm9vbGVhblxuKTogQ2FzdGxlT2JqIHtcbiAgcmV0dXJuIHtcbiAgICB3aGl0ZToge1xuICAgICAga2luZ3NpZGU6IHdoaXRlS2luZ3NpZGUsXG4gICAgICBxdWVlbnNpZGU6IHdoaXRlUXVlZW5zaWRlXG4gICAgfSxcbiAgICBibGFjazoge1xuICAgICAga2luZ3NpZGU6IGJsYWNrS2luZ3NpZGUsXG4gICAgICBxdWVlbnNpZGU6IGJsYWNrUXVlZW5zaWRlXG4gICAgfVxuICB9O1xufVxuIl0sIm5hbWVzIjpbIkNhc3RsZSIsIndoaXRlS2luZ3NpZGUiLCJ3aGl0ZVF1ZWVuc2lkZSIsImJsYWNrS2luZ3NpZGUiLCJibGFja1F1ZWVuc2lkZSIsIndoaXRlIiwia2luZ3NpZGUiLCJxdWVlbnNpZGUiLCJibGFjayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Castle.ts\n");

/***/ }),

/***/ "./src/Gameboard.ts":
/*!**************************!*\
  !*** ./src/Gameboard.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_moves__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/moves */ \"./src/utils/moves.ts\");\n/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/helpers */ \"./src/utils/helpers.ts\");\n/* harmony import */ var _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ranksAndFiles */ \"./src/ranksAndFiles.ts\");\n/* harmony import */ var _Castle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Castle */ \"./src/Castle.ts\");\n\n\n\n\n\nfunction createBoard() {\n  return _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__.files.reduce((acc, file) => {\n    _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__.ranks.forEach(rank => {\n      const square = file.concat(rank.toString());\n      acc.set(square, {\n        piece: null\n      });\n    });\n    return acc;\n  }, new Map());\n}\n\nconst Gameboard = (board = createBoard(), squaresGivingCheck, CastleRights) => {\n  function makeMove(s1, s2, promote) {\n    const piece = at(s1).piece;\n    if (!piece) return;\n    if (!validate.move(s1, s1)) return;\n\n    switch (piece.type) {\n      case 'pawn':\n        {\n          // promotion stuff\n          if (promote) {\n            if (!validate.promotion(s1, s2)) return;\n            from(s1).to(s2);\n            at(s2).promote(promote);\n          }\n\n          if (enPassant.checkToggle(s1, s2)) {\n            enPassant.toggle(s2);\n          }\n\n          from(s1).to(s2);\n          break;\n        }\n\n      case 'king':\n        {\n          // check if move is castle\n          let castleSide = '';\n          const castleSquares = get.castleSquares(piece.color);\n\n          for (const [side, squares] of Object.entries(castleSquares)) {\n            if (squares[1] === s2) castleSide = side;\n          }\n\n          if (castleSide) castling.castle(piece.color, castleSide);else from(s1).to(s2);\n          break;\n        }\n\n      default:\n        from(s1).to(s2);\n    }\n\n    enPassant.remove();\n    return board;\n  }\n\n  const castling = {\n    canCastle: (color, side) => {\n      if (_Castle__WEBPACK_IMPORTED_MODULE_3__[\"default\"] && !_Castle__WEBPACK_IMPORTED_MODULE_3__[\"default\"][color][side]) return false; // check if rook still exists\n\n      if (!checkIfRookExists()) return false;\n      const oppColor = color === 'white' ? 'black' : 'white';\n      const oppMoves = (0,_utils_moves__WEBPACK_IMPORTED_MODULE_0__.getAttackingMovesForColor)(oppColor, board);\n      const castleSquares = get.castleSquares(color)[side];\n\n      for (const square of castleSquares) {\n        // check if castle square is cleared\n        if (at(square).piece) return false; // make sure castle square isnt attacked\n\n        if (oppMoves.includes(square)) return false;\n      }\n\n      return true;\n\n      function checkIfRookExists() {\n        let rookExists = false;\n        const rank = color === 'white' ? 1 : 8;\n        const loopStart = side === 'queenside' ? _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__.files.indexOf('a') : _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__.files.indexOf('d');\n        const loopEnd = side === 'queenside' ? _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__.files.indexOf('e') : _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__.files.indexOf('h');\n\n        for (let i = loopStart; i <= loopEnd; i++) {\n          const square = _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__.files[i] + rank;\n          const piece = at(square).piece;\n          if (!piece) continue;\n          if (piece.type === 'rook') rookExists = true;\n        }\n\n        return rookExists;\n      }\n    },\n    castle: (color, side) => {\n      const castleSquares = get.castleSquares(color)[side];\n      const kingPos = get.kingPosition(color);\n      const rookPos = getRookPos();\n      from(rookPos).to(castleSquares[0]);\n      from(kingPos).to(castleSquares[1]);\n\n      function getRookPos() {\n        const pieceMap = get.pieceMap();\n        const rookPos = pieceMap[color].rook.find(square => {\n          const file = square.split('')[0];\n          return side === 'kingside' ? _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__.files.indexOf(file) > 3 : _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__.files.indexOf(file) < 3;\n        });\n        return rookPos;\n      } // need to get king position\n      // need to get castle squares\n      // need to find rook\n\n    },\n    getRightsAfterMove: square => {\n      const piece = at(square).piece;\n      const castleRights = CastleRights || (0,_Castle__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(true, true, true, true);\n\n      if (castleRights[piece.color].kingside || castleRights[piece.color].queenside) {\n        // check if i need to change castling rights\n        if (piece.type === 'king') {\n          castleRights[piece.color].kingside = false;\n          castleRights[piece.color].queenside = false;\n        }\n\n        if (piece.type === 'rook') {\n          // need to find if it is kingside or queenside rook\n          const [file] = square.split('');\n          const kingside = _ranksAndFiles__WEBPACK_IMPORTED_MODULE_2__.files.indexOf(file) > 3;\n          if (kingside) castleRights[piece.color].kingside = false;else castleRights[piece.color].queenside = false;\n        }\n      }\n\n      return castleRights;\n    }\n  };\n\n  const enPassant = (() => {\n    function getSquare(current, color) {\n      const {\n        x,\n        y\n      } = (0,_utils_helpers__WEBPACK_IMPORTED_MODULE_1__.toXY)(current);\n      const newY = color === 'white' ? y - 1 : y + 1;\n      return (0,_utils_helpers__WEBPACK_IMPORTED_MODULE_1__.fromXY)({\n        x,\n        y: newY\n      });\n    }\n\n    return {\n      checkToggle: (from, to) => {\n        const {\n          y: y1\n        } = (0,_utils_helpers__WEBPACK_IMPORTED_MODULE_1__.toXY)(from);\n        const {\n          y: y2\n        } = (0,_utils_helpers__WEBPACK_IMPORTED_MODULE_1__.toXY)(to);\n        return Math.abs(y1 - y2) === 2;\n      },\n      toggle: current => {\n        const {\n          color\n        } = at(current).piece;\n        const enPassantSquare = getSquare(current, color);\n        at(enPassantSquare).setEnPassant(color, current);\n      },\n      remove: () => {\n        for (const squareObj of board.values()) {\n          if (squareObj.enPassant) return squareObj.enPassant = undefined;\n        }\n      }\n    };\n  })();\n\n  const at = square => ({\n    place: piece => {\n      if (!board.get(square)) return;\n      board.set(square, {\n        piece\n      });\n    },\n    remove: () => {\n      if (!board.get(square)) return;\n      board.set(square, {\n        piece: null\n      });\n    },\n    promote: pieceType => {\n      const squareVal = board.get(square);\n      const piece = squareVal === null || squareVal === void 0 ? void 0 : squareVal.piece;\n      if (!piece) return;\n      board.set(square, Object.assign(Object.assign({}, squareVal), {\n        piece: Object.assign(Object.assign({}, piece), {\n          type: pieceType\n        })\n      }));\n    },\n    setEnPassant: (color, current) => {\n      if (!board.get(square)) return;\n      board.set(square, {\n        piece: null,\n        enPassant: {\n          current\n          /* square pawn is on */\n          ,\n          color: color\n        }\n      });\n    },\n\n    get piece() {\n      var _a;\n\n      return (_a = board.get(square)) === null || _a === void 0 ? void 0 : _a.piece;\n    },\n\n    getLegalMoves: () => {\n      squaresGivingCheck = squaresGivingCheck || [];\n      const {\n        type,\n        color\n      } = at(square).piece;\n\n      switch (squaresGivingCheck.length) {\n        case 2:\n          {\n            if (type !== 'king') return [];\n            return (0,_utils_moves__WEBPACK_IMPORTED_MODULE_0__.getLegalMoves)(square, board);\n          }\n\n        case 1:\n          {\n            return (0,_utils_moves__WEBPACK_IMPORTED_MODULE_0__.getLegalMovesInCheck)(origin, board, get.kingPosition(color), squaresGivingCheck[0]);\n          }\n\n        default:\n          {\n            if (type === 'king') {\n              let legalMoves = (0,_utils_moves__WEBPACK_IMPORTED_MODULE_0__.getLegalMoves)(square, board);\n              if (castling.canCastle(color, 'kingside')) legalMoves = [...legalMoves, ...get.castleSquares(color).kingside];\n              if (castling.canCastle(color, 'queenside')) legalMoves = [...legalMoves, ...get.castleSquares(color).queenside];\n              return legalMoves;\n            } else return (0,_utils_moves__WEBPACK_IMPORTED_MODULE_0__.getLegalMoves)(square, board);\n          }\n      }\n    }\n  });\n\n  const from = s1 => ({\n    to: s2 => {\n      const piece = at(s1).piece;\n      if (!piece) return; // move piece\n\n      at(s1).remove();\n      at(s2).place(piece);\n    }\n  });\n\n  const get = {\n    kingPosition: color => {\n      for (const [square, value] of board.entries()) {\n        if (value.piece && value.piece.type === 'king' && value.piece.color === color) return square;\n      }\n    },\n    pieceMap: () => {\n      const pieceMap = {\n        white: {},\n        black: {}\n      };\n\n      for (const [square, value] of board.entries()) {\n        const {\n          piece\n        } = value;\n        if (!piece) continue;\n        const {\n          type,\n          color\n        } = piece;\n        pieceMap[color][type] = pieceMap[color][type] ? [...pieceMap[color][type], square] : [square];\n      }\n\n      return pieceMap;\n    },\n    squaresGivingCheckAfterMove: (from, end) => {\n      var _a;\n\n      const squaresGivingCheck = [];\n      const piece = (_a = board.get(end)) === null || _a === void 0 ? void 0 : _a.piece;\n      const oppColor = piece.color === 'white' ? 'black' : 'white';\n      const kingPosition = get.kingPosition(oppColor);\n      const pieceHitsKing = (0,_utils_moves__WEBPACK_IMPORTED_MODULE_0__.getLegalMoves)(end, board).includes(kingPosition);\n      if (pieceHitsKing) squaresGivingCheck.push(end);\n      const discoveredCheck = (0,_utils_moves__WEBPACK_IMPORTED_MODULE_0__.getDiscoveredCheck)(kingPosition, oppColor, from, board);\n      if (discoveredCheck) squaresGivingCheck.push(discoveredCheck);\n      return squaresGivingCheck;\n    },\n    isCheckmate: (color, squaresGivingCheck) => {\n      const kingPos = get.kingPosition(color);\n      const legalMoves = at(kingPos).getLegalMoves(); // check if check can be blocked\n\n      if (squaresGivingCheck.length === 1) {\n        if ((0,_utils_moves__WEBPACK_IMPORTED_MODULE_0__.canBlockOrCaptureCheck)(kingPos, squaresGivingCheck[0], board)) return false;\n      }\n\n      if (!legalMoves || !legalMoves.length) return true;\n      return false;\n    },\n\n    castleSquares(color) {\n      const rank = color === 'white' ? 1 : 8;\n      return {\n        kingside: [`f${rank}`, `g${rank}`],\n        queenside: [`d${rank}`, `c${rank}`]\n      };\n    }\n\n  };\n  const validate = {\n    move: (from, to) => {\n      const piece = at(from).piece;\n      if (!piece) return false;\n      if (!at(from).getLegalMoves().includes(to)) return false;\n      return true;\n    },\n    promotion: (from, to) => {\n      const piece = at(from).piece;\n      if ((piece === null || piece === void 0 ? void 0 : piece.type) !== 'pawn') return false;\n      const endOfBoard = piece.color === 'white' ? 8 : 1;\n      const [, rank] = to.split('');\n      if (+rank === endOfBoard) return true;\n      return false;\n    }\n  };\n  return {\n    createBoard,\n    castling,\n    enPassant,\n    at,\n    from,\n    get,\n    validate,\n    makeMove,\n\n    get board() {\n      return board;\n    }\n\n  };\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Gameboard);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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InNvdXJjZXMiOlsid2VicGFjazovL2Nyb0NoZXNzLy4vc3JjL0dhbWVib2FyZC50cz81N2UzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGdldExlZ2FsTW92ZXMsXG4gIGdldERpc2NvdmVyZWRDaGVjayxcbiAgY2FuQmxvY2tPckNhcHR1cmVDaGVjayxcbiAgZ2V0QXR0YWNraW5nTW92ZXNGb3JDb2xvcixcbiAgZ2V0TGVnYWxNb3Zlc0luQ2hlY2tcbn0gZnJvbSAnLi91dGlscy9tb3Zlcyc7XG5pbXBvcnQgeyB0b1hZLCBmcm9tWFkgfSBmcm9tICcuL3V0aWxzL2hlbHBlcnMnO1xuaW1wb3J0IHsgcmFua3MsIGZpbGVzIH0gZnJvbSAnLi9yYW5rc0FuZEZpbGVzJztcbmltcG9ydCB7XG4gIENvbG9yLFxuICBTcXVhcmUsXG4gIEJvYXJkLFxuICBQaWVjZVR5cGUsXG4gIE1vdmVzLFxuICBDYXN0bGVTcXVhcmVzVHlwZVxufSBmcm9tICcuL3R5cGVzL3R5cGVzJztcbmltcG9ydCB7XG4gIEFsbFBpZWNlTWFwLFxuICBDYXN0bGVPYmosXG4gIEdhbWVib2FyZE9iaixcbiAgUGllY2VNYXAsXG4gIFBpZWNlT2JqXG59IGZyb20gJy4vdHlwZXMvaW50ZXJmYWNlcyc7XG5pbXBvcnQgQ2FzdGxlIGZyb20gJy4vQ2FzdGxlJztcblxuZnVuY3Rpb24gY3JlYXRlQm9hcmQoKTogQm9hcmQge1xuICByZXR1cm4gZmlsZXMucmVkdWNlKChhY2MsIGZpbGUpID0+IHtcbiAgICByYW5rcy5mb3JFYWNoKChyYW5rKSA9PiB7XG4gICAgICBjb25zdCBzcXVhcmUgPSBmaWxlLmNvbmNhdChyYW5rLnRvU3RyaW5nKCkpO1xuICAgICAgYWNjLnNldChzcXVhcmUsIHsgcGllY2U6IG51bGwgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwgbmV3IE1hcCgpKTtcbn1cblxuY29uc3QgR2FtZWJvYXJkID0gKFxuICBib2FyZCA9IGNyZWF0ZUJvYXJkKCksXG4gIHNxdWFyZXNHaXZpbmdDaGVjaz86IE1vdmVzLFxuICBDYXN0bGVSaWdodHM/OiBDYXN0bGVPYmpcbik6IEdhbWVib2FyZE9iaiA9PiB7XG4gIGZ1bmN0aW9uIG1ha2VNb3ZlKFxuICAgIHMxOiBTcXVhcmUsXG4gICAgczI6IFNxdWFyZSxcbiAgICBwcm9tb3RlPzogUGllY2VUeXBlXG4gICk6IEJvYXJkIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBwaWVjZSA9IGF0KHMxKS5waWVjZTtcbiAgICBpZiAoIXBpZWNlKSByZXR1cm47XG5cbiAgICBpZiAoIXZhbGlkYXRlLm1vdmUoczEsIHMxKSkgcmV0dXJuO1xuXG4gICAgc3dpdGNoIChwaWVjZS50eXBlKSB7XG4gICAgICBjYXNlICdwYXduJzoge1xuICAgICAgICAvLyBwcm9tb3Rpb24gc3R1ZmZcbiAgICAgICAgaWYgKHByb21vdGUpIHtcbiAgICAgICAgICBpZiAoIXZhbGlkYXRlLnByb21vdGlvbihzMSwgczIpKSByZXR1cm47XG5cbiAgICAgICAgICBmcm9tKHMxKS50byhzMik7XG4gICAgICAgICAgYXQoczIpLnByb21vdGUocHJvbW90ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW5QYXNzYW50LmNoZWNrVG9nZ2xlKHMxLCBzMikpIHtcbiAgICAgICAgICBlblBhc3NhbnQudG9nZ2xlKHMyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZyb20oczEpLnRvKHMyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2tpbmcnOiB7XG4gICAgICAgIC8vIGNoZWNrIGlmIG1vdmUgaXMgY2FzdGxlXG4gICAgICAgIGxldCBjYXN0bGVTaWRlOiAnJyB8ICdxdWVlbnNpZGUnIHwgJ2tpbmdzaWRlJyA9ICcnO1xuICAgICAgICBjb25zdCBjYXN0bGVTcXVhcmVzID0gZ2V0LmNhc3RsZVNxdWFyZXMocGllY2UuY29sb3IpO1xuXG4gICAgICAgIGZvciAoY29uc3QgW3NpZGUsIHNxdWFyZXNdIG9mIE9iamVjdC5lbnRyaWVzKGNhc3RsZVNxdWFyZXMpKSB7XG4gICAgICAgICAgaWYgKHNxdWFyZXNbMV0gPT09IHMyKSBjYXN0bGVTaWRlID0gc2lkZSBhcyAna2luZ3NpZGUnIHwgJ3F1ZWVuc2lkZSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FzdGxlU2lkZSkgY2FzdGxpbmcuY2FzdGxlKHBpZWNlLmNvbG9yLCBjYXN0bGVTaWRlKTtcbiAgICAgICAgZWxzZSBmcm9tKHMxKS50byhzMik7XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGZyb20oczEpLnRvKHMyKTtcbiAgICB9XG5cbiAgICBlblBhc3NhbnQucmVtb3ZlKCk7XG4gICAgcmV0dXJuIGJvYXJkO1xuICB9XG5cbiAgY29uc3QgY2FzdGxpbmcgPSB7XG4gICAgY2FuQ2FzdGxlOiAoY29sb3I6IENvbG9yLCBzaWRlOiAna2luZ3NpZGUnIHwgJ3F1ZWVuc2lkZScpOiBib29sZWFuID0+IHtcbiAgICAgIGlmIChDYXN0bGUgJiYgIUNhc3RsZVtjb2xvcl1bc2lkZV0pIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gY2hlY2sgaWYgcm9vayBzdGlsbCBleGlzdHNcbiAgICAgIGlmICghY2hlY2tJZlJvb2tFeGlzdHMoKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjb25zdCBvcHBDb2xvciA9IGNvbG9yID09PSAnd2hpdGUnID8gJ2JsYWNrJyA6ICd3aGl0ZSc7XG4gICAgICBjb25zdCBvcHBNb3ZlcyA9IGdldEF0dGFja2luZ01vdmVzRm9yQ29sb3Iob3BwQ29sb3IsIGJvYXJkKTtcblxuICAgICAgY29uc3QgY2FzdGxlU3F1YXJlcyA9IGdldC5jYXN0bGVTcXVhcmVzKGNvbG9yKVtzaWRlXTtcbiAgICAgIGZvciAoY29uc3Qgc3F1YXJlIG9mIGNhc3RsZVNxdWFyZXMpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgY2FzdGxlIHNxdWFyZSBpcyBjbGVhcmVkXG4gICAgICAgIGlmIChhdChzcXVhcmUpLnBpZWNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSBjYXN0bGUgc3F1YXJlIGlzbnQgYXR0YWNrZWRcbiAgICAgICAgaWYgKG9wcE1vdmVzLmluY2x1ZGVzKHNxdWFyZSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIGZ1bmN0aW9uIGNoZWNrSWZSb29rRXhpc3RzKCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgcm9va0V4aXN0cyA9IGZhbHNlO1xuICAgICAgICBjb25zdCByYW5rID0gY29sb3IgPT09ICd3aGl0ZScgPyAxIDogODtcbiAgICAgICAgY29uc3QgbG9vcFN0YXJ0ID1cbiAgICAgICAgICBzaWRlID09PSAncXVlZW5zaWRlJyA/IGZpbGVzLmluZGV4T2YoJ2EnKSA6IGZpbGVzLmluZGV4T2YoJ2QnKTtcbiAgICAgICAgY29uc3QgbG9vcEVuZCA9XG4gICAgICAgICAgc2lkZSA9PT0gJ3F1ZWVuc2lkZScgPyBmaWxlcy5pbmRleE9mKCdlJykgOiBmaWxlcy5pbmRleE9mKCdoJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSBsb29wU3RhcnQ7IGkgPD0gbG9vcEVuZDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qgc3F1YXJlID0gZmlsZXNbaV0gKyByYW5rO1xuXG4gICAgICAgICAgY29uc3QgcGllY2UgPSBhdChzcXVhcmUpLnBpZWNlO1xuICAgICAgICAgIGlmICghcGllY2UpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgaWYgKHBpZWNlLnR5cGUgPT09ICdyb29rJykgcm9va0V4aXN0cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvb2tFeGlzdHM7XG4gICAgICB9XG4gICAgfSxcbiAgICBjYXN0bGU6IChjb2xvcjogQ29sb3IsIHNpZGU6ICdraW5nc2lkZScgfCAncXVlZW5zaWRlJyk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgY2FzdGxlU3F1YXJlcyA9IGdldC5jYXN0bGVTcXVhcmVzKGNvbG9yKVtzaWRlXTtcblxuICAgICAgY29uc3Qga2luZ1BvcyA9IGdldC5raW5nUG9zaXRpb24oY29sb3IpIGFzIFNxdWFyZTtcbiAgICAgIGNvbnN0IHJvb2tQb3MgPSBnZXRSb29rUG9zKCkgYXMgU3F1YXJlO1xuXG4gICAgICBmcm9tKHJvb2tQb3MpLnRvKGNhc3RsZVNxdWFyZXNbMF0pO1xuICAgICAgZnJvbShraW5nUG9zKS50byhjYXN0bGVTcXVhcmVzWzFdKTtcblxuICAgICAgZnVuY3Rpb24gZ2V0Um9va1BvcygpIHtcbiAgICAgICAgY29uc3QgcGllY2VNYXAgPSBnZXQucGllY2VNYXAoKTtcbiAgICAgICAgY29uc3Qgcm9va1BvcyA9IHBpZWNlTWFwW2NvbG9yXS5yb29rLmZpbmQoKHNxdWFyZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGZpbGUgPSBzcXVhcmUuc3BsaXQoJycpWzBdO1xuICAgICAgICAgIHJldHVybiBzaWRlID09PSAna2luZ3NpZGUnXG4gICAgICAgICAgICA/IGZpbGVzLmluZGV4T2YoZmlsZSkgPiAzXG4gICAgICAgICAgICA6IGZpbGVzLmluZGV4T2YoZmlsZSkgPCAzO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcm9va1BvcztcbiAgICAgIH1cbiAgICAgIC8vIG5lZWQgdG8gZ2V0IGtpbmcgcG9zaXRpb25cbiAgICAgIC8vIG5lZWQgdG8gZ2V0IGNhc3RsZSBzcXVhcmVzXG4gICAgICAvLyBuZWVkIHRvIGZpbmQgcm9va1xuICAgIH0sXG4gICAgZ2V0UmlnaHRzQWZ0ZXJNb3ZlOiAoc3F1YXJlOiBTcXVhcmUpID0+IHtcbiAgICAgIGNvbnN0IHBpZWNlID0gYXQoc3F1YXJlKS5waWVjZSBhcyBQaWVjZU9iajtcblxuICAgICAgY29uc3QgY2FzdGxlUmlnaHRzID0gQ2FzdGxlUmlnaHRzIHx8IENhc3RsZSh0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcblxuICAgICAgaWYgKFxuICAgICAgICBjYXN0bGVSaWdodHNbcGllY2UuY29sb3JdLmtpbmdzaWRlIHx8XG4gICAgICAgIGNhc3RsZVJpZ2h0c1twaWVjZS5jb2xvcl0ucXVlZW5zaWRlXG4gICAgICApIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgaSBuZWVkIHRvIGNoYW5nZSBjYXN0bGluZyByaWdodHNcbiAgICAgICAgaWYgKHBpZWNlLnR5cGUgPT09ICdraW5nJykge1xuICAgICAgICAgIGNhc3RsZVJpZ2h0c1twaWVjZS5jb2xvcl0ua2luZ3NpZGUgPSBmYWxzZTtcbiAgICAgICAgICBjYXN0bGVSaWdodHNbcGllY2UuY29sb3JdLnF1ZWVuc2lkZSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBpZWNlLnR5cGUgPT09ICdyb29rJykge1xuICAgICAgICAgIC8vIG5lZWQgdG8gZmluZCBpZiBpdCBpcyBraW5nc2lkZSBvciBxdWVlbnNpZGUgcm9va1xuICAgICAgICAgIGNvbnN0IFtmaWxlXSA9IHNxdWFyZS5zcGxpdCgnJyk7XG4gICAgICAgICAgY29uc3Qga2luZ3NpZGUgPSBmaWxlcy5pbmRleE9mKGZpbGUpID4gMztcbiAgICAgICAgICBpZiAoa2luZ3NpZGUpIGNhc3RsZVJpZ2h0c1twaWVjZS5jb2xvcl0ua2luZ3NpZGUgPSBmYWxzZTtcbiAgICAgICAgICBlbHNlIGNhc3RsZVJpZ2h0c1twaWVjZS5jb2xvcl0ucXVlZW5zaWRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNhc3RsZVJpZ2h0cztcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZW5QYXNzYW50ID0gKCgpID0+IHtcbiAgICBmdW5jdGlvbiBnZXRTcXVhcmUoY3VycmVudDogU3F1YXJlLCBjb2xvcjogQ29sb3IpOiBTcXVhcmUge1xuICAgICAgY29uc3QgeyB4LCB5IH0gPSB0b1hZKGN1cnJlbnQpO1xuICAgICAgY29uc3QgbmV3WSA9IGNvbG9yID09PSAnd2hpdGUnID8geSAtIDEgOiB5ICsgMTtcbiAgICAgIHJldHVybiBmcm9tWFkoeyB4LCB5OiBuZXdZIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBjaGVja1RvZ2dsZTogKGZyb206IFNxdWFyZSwgdG86IFNxdWFyZSk6IGJvb2xlYW4gPT4ge1xuICAgICAgICBjb25zdCB7IHk6IHkxIH0gPSB0b1hZKGZyb20pO1xuICAgICAgICBjb25zdCB7IHk6IHkyIH0gPSB0b1hZKHRvKTtcblxuICAgICAgICByZXR1cm4gTWF0aC5hYnMoeTEgLSB5MikgPT09IDI7XG4gICAgICB9LFxuICAgICAgdG9nZ2xlOiAoY3VycmVudDogU3F1YXJlKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29sb3IgfSA9IGF0KGN1cnJlbnQpLnBpZWNlIGFzIFBpZWNlT2JqO1xuICAgICAgICBjb25zdCBlblBhc3NhbnRTcXVhcmUgPSBnZXRTcXVhcmUoY3VycmVudCwgY29sb3IpO1xuICAgICAgICBhdChlblBhc3NhbnRTcXVhcmUpLnNldEVuUGFzc2FudChjb2xvciwgY3VycmVudCk7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlOiAoKTogdm9pZCA9PiB7XG4gICAgICAgIGZvciAoY29uc3Qgc3F1YXJlT2JqIG9mIGJvYXJkLnZhbHVlcygpKSB7XG4gICAgICAgICAgaWYgKHNxdWFyZU9iai5lblBhc3NhbnQpIHJldHVybiAoc3F1YXJlT2JqLmVuUGFzc2FudCA9IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9KSgpO1xuXG4gIGNvbnN0IGF0ID0gKHNxdWFyZTogU3F1YXJlKSA9PiAoe1xuICAgIHBsYWNlOiAocGllY2U6IFBpZWNlT2JqKTogdm9pZCA9PiB7XG4gICAgICBpZiAoIWJvYXJkLmdldChzcXVhcmUpKSByZXR1cm47XG5cbiAgICAgIGJvYXJkLnNldChzcXVhcmUsIHsgcGllY2UgfSk7XG4gICAgfSxcbiAgICByZW1vdmU6ICgpOiB2b2lkID0+IHtcbiAgICAgIGlmICghYm9hcmQuZ2V0KHNxdWFyZSkpIHJldHVybjtcblxuICAgICAgYm9hcmQuc2V0KHNxdWFyZSwgeyBwaWVjZTogbnVsbCB9KTtcbiAgICB9LFxuICAgIHByb21vdGU6IChwaWVjZVR5cGU6IFBpZWNlVHlwZSk6IHZvaWQgPT4ge1xuICAgICAgY29uc3Qgc3F1YXJlVmFsID0gYm9hcmQuZ2V0KHNxdWFyZSk7XG4gICAgICBjb25zdCBwaWVjZSA9IHNxdWFyZVZhbD8ucGllY2U7XG4gICAgICBpZiAoIXBpZWNlKSByZXR1cm47XG5cbiAgICAgIGJvYXJkLnNldChzcXVhcmUsIHsgLi4uc3F1YXJlVmFsLCBwaWVjZTogeyAuLi5waWVjZSwgdHlwZTogcGllY2VUeXBlIH0gfSk7XG4gICAgfSxcbiAgICBzZXRFblBhc3NhbnQ6IChjb2xvcjogQ29sb3IsIGN1cnJlbnQ6IFNxdWFyZSk6IHZvaWQgPT4ge1xuICAgICAgaWYgKCFib2FyZC5nZXQoc3F1YXJlKSkgcmV0dXJuO1xuXG4gICAgICBib2FyZC5zZXQoc3F1YXJlLCB7XG4gICAgICAgIHBpZWNlOiBudWxsLFxuICAgICAgICBlblBhc3NhbnQ6IHtcbiAgICAgICAgICBjdXJyZW50IC8qIHNxdWFyZSBwYXduIGlzIG9uICovLFxuICAgICAgICAgIGNvbG9yOiBjb2xvclxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldCBwaWVjZSgpIHtcbiAgICAgIHJldHVybiBib2FyZC5nZXQoc3F1YXJlKT8ucGllY2U7XG4gICAgfSxcbiAgICBnZXRMZWdhbE1vdmVzOiAoKTogTW92ZXMgPT4ge1xuICAgICAgc3F1YXJlc0dpdmluZ0NoZWNrID0gc3F1YXJlc0dpdmluZ0NoZWNrIHx8IFtdO1xuICAgICAgY29uc3QgeyB0eXBlLCBjb2xvciB9ID0gYXQoc3F1YXJlKS5waWVjZSBhcyBQaWVjZU9iajtcblxuICAgICAgc3dpdGNoIChzcXVhcmVzR2l2aW5nQ2hlY2subGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0eXBlICE9PSAna2luZycpIHJldHVybiBbXTtcbiAgICAgICAgICByZXR1cm4gZ2V0TGVnYWxNb3ZlcyhzcXVhcmUsIGJvYXJkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICByZXR1cm4gZ2V0TGVnYWxNb3Zlc0luQ2hlY2soXG4gICAgICAgICAgICBvcmlnaW4sXG4gICAgICAgICAgICBib2FyZCxcbiAgICAgICAgICAgIGdldC5raW5nUG9zaXRpb24oY29sb3IpIGFzIFNxdWFyZSxcbiAgICAgICAgICAgIHNxdWFyZXNHaXZpbmdDaGVja1swXVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIGlmICh0eXBlID09PSAna2luZycpIHtcbiAgICAgICAgICAgIGxldCBsZWdhbE1vdmVzID0gZ2V0TGVnYWxNb3ZlcyhzcXVhcmUsIGJvYXJkKTtcbiAgICAgICAgICAgIGlmIChjYXN0bGluZy5jYW5DYXN0bGUoY29sb3IsICdraW5nc2lkZScpKVxuICAgICAgICAgICAgICBsZWdhbE1vdmVzID0gW1xuICAgICAgICAgICAgICAgIC4uLmxlZ2FsTW92ZXMsXG4gICAgICAgICAgICAgICAgLi4uZ2V0LmNhc3RsZVNxdWFyZXMoY29sb3IpLmtpbmdzaWRlXG4gICAgICAgICAgICAgIF07XG4gICAgICAgICAgICBpZiAoY2FzdGxpbmcuY2FuQ2FzdGxlKGNvbG9yLCAncXVlZW5zaWRlJykpXG4gICAgICAgICAgICAgIGxlZ2FsTW92ZXMgPSBbXG4gICAgICAgICAgICAgICAgLi4ubGVnYWxNb3ZlcyxcbiAgICAgICAgICAgICAgICAuLi5nZXQuY2FzdGxlU3F1YXJlcyhjb2xvcikucXVlZW5zaWRlXG4gICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIHJldHVybiBsZWdhbE1vdmVzO1xuICAgICAgICAgIH0gZWxzZSByZXR1cm4gZ2V0TGVnYWxNb3ZlcyhzcXVhcmUsIGJvYXJkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgZnJvbSA9IChzMTogU3F1YXJlKSA9PiAoe1xuICAgIHRvOiAoczI6IFNxdWFyZSk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgcGllY2UgPSBhdChzMSkucGllY2U7XG4gICAgICBpZiAoIXBpZWNlKSByZXR1cm47XG5cbiAgICAgIC8vIG1vdmUgcGllY2VcbiAgICAgIGF0KHMxKS5yZW1vdmUoKTtcbiAgICAgIGF0KHMyKS5wbGFjZShwaWVjZSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBnZXQgPSB7XG4gICAga2luZ1Bvc2l0aW9uOiAoY29sb3I6IENvbG9yKTogU3F1YXJlIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGZvciAoY29uc3QgW3NxdWFyZSwgdmFsdWVdIG9mIGJvYXJkLmVudHJpZXMoKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdmFsdWUucGllY2UgJiZcbiAgICAgICAgICB2YWx1ZS5waWVjZS50eXBlID09PSAna2luZycgJiZcbiAgICAgICAgICB2YWx1ZS5waWVjZS5jb2xvciA9PT0gY29sb3JcbiAgICAgICAgKVxuICAgICAgICAgIHJldHVybiBzcXVhcmU7XG4gICAgICB9XG4gICAgfSxcbiAgICBwaWVjZU1hcDogKCk6IEFsbFBpZWNlTWFwID0+IHtcbiAgICAgIGNvbnN0IHBpZWNlTWFwID0geyB3aGl0ZToge30gYXMgUGllY2VNYXAsIGJsYWNrOiB7fSBhcyBQaWVjZU1hcCB9O1xuICAgICAgZm9yIChjb25zdCBbc3F1YXJlLCB2YWx1ZV0gb2YgYm9hcmQuZW50cmllcygpKSB7XG4gICAgICAgIGNvbnN0IHsgcGllY2UgfSA9IHZhbHVlO1xuICAgICAgICBpZiAoIXBpZWNlKSBjb250aW51ZTtcblxuICAgICAgICBjb25zdCB7IHR5cGUsIGNvbG9yIH0gPSBwaWVjZTtcbiAgICAgICAgcGllY2VNYXBbY29sb3JdW3R5cGVdID0gcGllY2VNYXBbY29sb3JdW3R5cGVdXG4gICAgICAgICAgPyBbLi4ucGllY2VNYXBbY29sb3JdW3R5cGVdLCBzcXVhcmVdXG4gICAgICAgICAgOiBbc3F1YXJlXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwaWVjZU1hcDtcbiAgICB9LFxuICAgIHNxdWFyZXNHaXZpbmdDaGVja0FmdGVyTW92ZTogKGZyb206IFNxdWFyZSwgZW5kOiBTcXVhcmUpOiBTcXVhcmVbXSA9PiB7XG4gICAgICBjb25zdCBzcXVhcmVzR2l2aW5nQ2hlY2s6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIGNvbnN0IHBpZWNlID0gYm9hcmQuZ2V0KGVuZCk/LnBpZWNlIGFzIFBpZWNlT2JqO1xuICAgICAgY29uc3Qgb3BwQ29sb3IgPSBwaWVjZS5jb2xvciA9PT0gJ3doaXRlJyA/ICdibGFjaycgOiAnd2hpdGUnO1xuICAgICAgY29uc3Qga2luZ1Bvc2l0aW9uID0gZ2V0LmtpbmdQb3NpdGlvbihvcHBDb2xvcikgYXMgU3F1YXJlO1xuXG4gICAgICBjb25zdCBwaWVjZUhpdHNLaW5nID0gZ2V0TGVnYWxNb3ZlcyhlbmQsIGJvYXJkKS5pbmNsdWRlcyhraW5nUG9zaXRpb24pO1xuICAgICAgaWYgKHBpZWNlSGl0c0tpbmcpIHNxdWFyZXNHaXZpbmdDaGVjay5wdXNoKGVuZCk7XG5cbiAgICAgIGNvbnN0IGRpc2NvdmVyZWRDaGVjayA9IGdldERpc2NvdmVyZWRDaGVjayhcbiAgICAgICAga2luZ1Bvc2l0aW9uLFxuICAgICAgICBvcHBDb2xvcixcbiAgICAgICAgZnJvbSxcbiAgICAgICAgYm9hcmRcbiAgICAgICk7XG4gICAgICBpZiAoZGlzY292ZXJlZENoZWNrKSBzcXVhcmVzR2l2aW5nQ2hlY2sucHVzaChkaXNjb3ZlcmVkQ2hlY2spO1xuXG4gICAgICByZXR1cm4gc3F1YXJlc0dpdmluZ0NoZWNrO1xuICAgIH0sXG4gICAgaXNDaGVja21hdGU6IChjb2xvcjogQ29sb3IsIHNxdWFyZXNHaXZpbmdDaGVjazogc3RyaW5nW10pOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IGtpbmdQb3MgPSBnZXQua2luZ1Bvc2l0aW9uKGNvbG9yKSBhcyBTcXVhcmU7XG4gICAgICBjb25zdCBsZWdhbE1vdmVzID0gYXQoa2luZ1BvcykuZ2V0TGVnYWxNb3ZlcygpO1xuICAgICAgLy8gY2hlY2sgaWYgY2hlY2sgY2FuIGJlIGJsb2NrZWRcbiAgICAgIGlmIChzcXVhcmVzR2l2aW5nQ2hlY2subGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmIChjYW5CbG9ja09yQ2FwdHVyZUNoZWNrKGtpbmdQb3MsIHNxdWFyZXNHaXZpbmdDaGVja1swXSwgYm9hcmQpKVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghbGVnYWxNb3ZlcyB8fCAhbGVnYWxNb3Zlcy5sZW5ndGgpIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgY2FzdGxlU3F1YXJlcyhjb2xvcjogQ29sb3IpOiBDYXN0bGVTcXVhcmVzVHlwZSB7XG4gICAgICBjb25zdCByYW5rID0gY29sb3IgPT09ICd3aGl0ZScgPyAxIDogODtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmdzaWRlOiBbYGYke3Jhbmt9YCwgYGcke3Jhbmt9YF0sXG4gICAgICAgIHF1ZWVuc2lkZTogW2BkJHtyYW5rfWAsIGBjJHtyYW5rfWBdXG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB2YWxpZGF0ZSA9IHtcbiAgICBtb3ZlOiAoZnJvbTogU3F1YXJlLCB0bzogU3F1YXJlKTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBwaWVjZSA9IGF0KGZyb20pLnBpZWNlO1xuICAgICAgaWYgKCFwaWVjZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBpZiAoIWF0KGZyb20pLmdldExlZ2FsTW92ZXMoKS5pbmNsdWRlcyh0bykpIHJldHVybiBmYWxzZTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBwcm9tb3Rpb246IChmcm9tOiBTcXVhcmUsIHRvOiBTcXVhcmUpOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IHBpZWNlID0gYXQoZnJvbSkucGllY2U7XG5cbiAgICAgIGlmIChwaWVjZT8udHlwZSAhPT0gJ3Bhd24nKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIGNvbnN0IGVuZE9mQm9hcmQgPSBwaWVjZS5jb2xvciA9PT0gJ3doaXRlJyA/IDggOiAxO1xuICAgICAgY29uc3QgWywgcmFua10gPSB0by5zcGxpdCgnJyk7XG4gICAgICBpZiAoK3JhbmsgPT09IGVuZE9mQm9hcmQpIHJldHVybiB0cnVlO1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY3JlYXRlQm9hcmQsXG4gICAgY2FzdGxpbmcsXG4gICAgZW5QYXNzYW50LFxuICAgIGF0LFxuICAgIGZyb20sXG4gICAgZ2V0LFxuICAgIHZhbGlkYXRlLFxuICAgIG1ha2VNb3ZlLFxuICAgIGdldCBib2FyZCgpIHtcbiAgICAgIHJldHVybiBib2FyZDtcbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHYW1lYm9hcmQ7XG4iXSwibmFtZXMiOlsiZ2V0TGVnYWxNb3ZlcyIsImdldERpc2NvdmVyZWRDaGVjayIsImNhbkJsb2NrT3JDYXB0dXJlQ2hlY2siLCJnZXRBdHRhY2tpbmdNb3Zlc0ZvckNvbG9yIiwiZ2V0TGVnYWxNb3Zlc0luQ2hlY2siLCJ0b1hZIiwiZnJvbVhZIiwicmFua3MiLCJmaWxlcyIsIkNhc3RsZSIsImNyZWF0ZUJvYXJkIiwicmVkdWNlIiwiYWNjIiwiZmlsZSIsImZvckVhY2giLCJyYW5rIiwic3F1YXJlIiwiY29uY2F0IiwidG9TdHJpbmciLCJzZXQiLCJwaWVjZSIsIk1hcCIsIkdhbWVib2FyZCIsImJvYXJkIiwic3F1YXJlc0dpdmluZ0NoZWNrIiwiQ2FzdGxlUmlnaHRzIiwibWFrZU1vdmUiLCJzMSIsInMyIiwicHJvbW90ZSIsImF0IiwidmFsaWRhdGUiLCJtb3ZlIiwidHlwZSIsInByb21vdGlvbiIsImZyb20iLCJ0byIsImVuUGFzc2FudCIsImNoZWNrVG9nZ2xlIiwidG9nZ2xlIiwiY2FzdGxlU2lkZSIsImNhc3RsZVNxdWFyZXMiLCJnZXQiLCJjb2xvciIsInNpZGUiLCJzcXVhcmVzIiwiT2JqZWN0IiwiZW50cmllcyIsImNhc3RsaW5nIiwiY2FzdGxlIiwicmVtb3ZlIiwiY2FuQ2FzdGxlIiwiY2hlY2tJZlJvb2tFeGlzdHMiLCJvcHBDb2xvciIsIm9wcE1vdmVzIiwiaW5jbHVkZXMiLCJyb29rRXhpc3RzIiwibG9vcFN0YXJ0IiwiaW5kZXhPZiIsImxvb3BFbmQiLCJpIiwia2luZ1BvcyIsImtpbmdQb3NpdGlvbiIsInJvb2tQb3MiLCJnZXRSb29rUG9zIiwicGllY2VNYXAiLCJyb29rIiwiZmluZCIsInNwbGl0IiwiZ2V0UmlnaHRzQWZ0ZXJNb3ZlIiwiY2FzdGxlUmlnaHRzIiwia2luZ3NpZGUiLCJxdWVlbnNpZGUiLCJnZXRTcXVhcmUiLCJjdXJyZW50IiwieCIsInkiLCJuZXdZIiwieTEiLCJ5MiIsIk1hdGgiLCJhYnMiLCJlblBhc3NhbnRTcXVhcmUiLCJzZXRFblBhc3NhbnQiLCJzcXVhcmVPYmoiLCJ2YWx1ZXMiLCJ1bmRlZmluZWQiLCJwbGFjZSIsInBpZWNlVHlwZSIsInNxdWFyZVZhbCIsIl9hIiwibGVuZ3RoIiwib3JpZ2luIiwibGVnYWxNb3ZlcyIsInZhbHVlIiwid2hpdGUiLCJibGFjayIsInNxdWFyZXNHaXZpbmdDaGVja0FmdGVyTW92ZSIsImVuZCIsInBpZWNlSGl0c0tpbmciLCJwdXNoIiwiZGlzY292ZXJlZENoZWNrIiwiaXNDaGVja21hdGUiLCJlbmRPZkJvYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Gameboard.ts\n");

/***/ }),

/***/ "./src/History.ts":
/*!************************!*\
  !*** ./src/History.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ History)\n/* harmony export */ });\n/* harmony import */ var _utils_moves__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/moves */ \"./src/utils/moves.ts\");\n// should output history object that holds move history in 2d array\n// for each move needs to attach piece Type to beginning of move if not pawn\n// should further specify square of piece if, say both rooks, can move to same square\n\nfunction History(prevHistory, board, pieceMap) {\n  const history = prevHistory || [];\n  const get = {\n    piecePrefix: (from, to) => {\n      var _a;\n\n      const {\n        type,\n        color\n      } = (_a = board.get(to)) === null || _a === void 0 ? void 0 : _a.piece;\n\n      switch (type) {\n        case 'pawn':\n          return '';\n\n        case 'knight':\n        case 'rook':\n          {\n            let prefix = type === 'rook' ? 'R' : 'N';\n\n            if (pieceMap[color][type].length !== 1) {\n              // look for piece of same type that couldve also went to the square\n              pieceMap[color][type].forEach(s => {\n                if (s === to) return;\n                const boardCopy = new Map(board);\n                boardCopy.set(to, {\n                  piece: null\n                });\n\n                if ((0,_utils_moves__WEBPACK_IMPORTED_MODULE_0__.getLegalMoves)(s, boardCopy).includes(to)) {\n                  const [x1, y1] = from.split('');\n                  const [x2] = s.split('');\n                  const sameFile = x1 === x2;\n                  prefix = sameFile ? prefix + y1 : prefix + x1;\n                }\n              });\n            }\n\n            return prefix;\n          }\n\n        default:\n          {\n            const prefix = type.charAt(0).toUpperCase();\n            return prefix;\n          }\n      }\n    },\n    castleNotation: side => {\n      return side === 'kingside' ? 'O-O' : 'O-O-O';\n    }\n  };\n  const affix = {\n    capture: (move, prefix) => {\n      return `${prefix}x${move}`;\n    },\n    promote: (move, pieceType) => {\n      const suffix = pieceType === 'knight' ? 'N' : pieceType.charAt(0).toUpperCase();\n      return `${move}=${suffix}`;\n    },\n    check: notation => {\n      return `${notation}+`;\n    },\n    checkmate: notation => {\n      return `${notation}#`;\n    }\n  };\n  return {\n    get,\n    affix,\n    insertMove: notation => {\n      const lastMovePair = history[history.length - 1];\n\n      if (lastMovePair.length === 1) {\n        lastMovePair.push(notation);\n      } else {\n        const newMovePair = [notation];\n        history.push(newMovePair);\n      }\n    }\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM5QixhQUFPLEdBQUdBLFFBQVEsR0FBbEI7QUFDRDtBQWZXLEdBQWQ7QUFrQkEsU0FBTztBQUNMaEMsT0FESztBQUVMeUIsU0FGSztBQUdMUyxjQUFVLEVBQUdGLFFBQUQsSUFBcUI7QUFDL0IsWUFBTUcsWUFBWSxHQUFHcEMsT0FBTyxDQUFDQSxPQUFPLENBQUNVLE1BQVIsR0FBaUIsQ0FBbEIsQ0FBNUI7O0FBQ0EsVUFBSTBCLFlBQVksQ0FBQzFCLE1BQWIsS0FBd0IsQ0FBNUIsRUFBK0I7QUFDN0IwQixvQkFBWSxDQUFDQyxJQUFiLENBQWtCSixRQUFsQjtBQUNELE9BRkQsTUFFTztBQUNMLGNBQU1LLFdBQVcsR0FBRyxDQUFDTCxRQUFELENBQXBCO0FBQ0FqQyxlQUFPLENBQUNxQyxJQUFSLENBQWFDLFdBQWI7QUFDRDtBQUNGO0FBWEksR0FBUDtBQWFEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3JvQ2hlc3MvLi9zcmMvSGlzdG9yeS50cz80YzIxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNob3VsZCBvdXRwdXQgaGlzdG9yeSBvYmplY3QgdGhhdCBob2xkcyBtb3ZlIGhpc3RvcnkgaW4gMmQgYXJyYXlcbi8vIGZvciBlYWNoIG1vdmUgbmVlZHMgdG8gYXR0YWNoIHBpZWNlIFR5cGUgdG8gYmVnaW5uaW5nIG9mIG1vdmUgaWYgbm90IHBhd25cbi8vIHNob3VsZCBmdXJ0aGVyIHNwZWNpZnkgc3F1YXJlIG9mIHBpZWNlIGlmLCBzYXkgYm90aCByb29rcywgY2FuIG1vdmUgdG8gc2FtZSBzcXVhcmVcblxuaW1wb3J0IHsgQWxsUGllY2VNYXAsIEhpc3RvcnlPYmosIFBpZWNlT2JqIH0gZnJvbSAnLi90eXBlcy9pbnRlcmZhY2VzJztcbmltcG9ydCB7IEJvYXJkLCBQaWVjZVR5cGUsIFNxdWFyZSB9IGZyb20gJy4vdHlwZXMvdHlwZXMnO1xuaW1wb3J0IHsgZ2V0TGVnYWxNb3ZlcyB9IGZyb20gJy4vdXRpbHMvbW92ZXMnO1xuXG50eXBlIEhpc3RvcnlUeXBlID0gU3F1YXJlW11bXTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSGlzdG9yeShcbiAgcHJldkhpc3Rvcnk6IEhpc3RvcnlUeXBlLFxuICBib2FyZDogQm9hcmQsXG4gIHBpZWNlTWFwOiBBbGxQaWVjZU1hcFxuKTogSGlzdG9yeU9iaiB7XG4gIGNvbnN0IGhpc3Rvcnk6IEhpc3RvcnlUeXBlID0gcHJldkhpc3RvcnkgfHwgW107XG5cbiAgY29uc3QgZ2V0ID0ge1xuICAgIHBpZWNlUHJlZml4OiAoZnJvbTogU3F1YXJlLCB0bzogU3F1YXJlKSA9PiB7XG4gICAgICBjb25zdCB7IHR5cGUsIGNvbG9yIH0gPSBib2FyZC5nZXQodG8pPy5waWVjZSBhcyBQaWVjZU9iajtcblxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ3Bhd24nOlxuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgY2FzZSAna25pZ2h0JzpcbiAgICAgICAgY2FzZSAncm9vayc6IHtcbiAgICAgICAgICBsZXQgcHJlZml4ID0gdHlwZSA9PT0gJ3Jvb2snID8gJ1InIDogJ04nO1xuICAgICAgICAgIGlmIChwaWVjZU1hcFtjb2xvcl1bdHlwZV0ubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICAvLyBsb29rIGZvciBwaWVjZSBvZiBzYW1lIHR5cGUgdGhhdCBjb3VsZHZlIGFsc28gd2VudCB0byB0aGUgc3F1YXJlXG4gICAgICAgICAgICBwaWVjZU1hcFtjb2xvcl1bdHlwZV0uZm9yRWFjaCgocykgPT4ge1xuICAgICAgICAgICAgICBpZiAocyA9PT0gdG8pIHJldHVybjtcblxuICAgICAgICAgICAgICBjb25zdCBib2FyZENvcHkgPSBuZXcgTWFwKGJvYXJkKTtcbiAgICAgICAgICAgICAgYm9hcmRDb3B5LnNldCh0bywgeyBwaWVjZTogbnVsbCB9KTtcblxuICAgICAgICAgICAgICBpZiAoZ2V0TGVnYWxNb3ZlcyhzLCBib2FyZENvcHkpLmluY2x1ZGVzKHRvKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFt4MSwgeTFdID0gZnJvbS5zcGxpdCgnJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgW3gyXSA9IHMuc3BsaXQoJycpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNhbWVGaWxlID0geDEgPT09IHgyO1xuXG4gICAgICAgICAgICAgICAgcHJlZml4ID0gc2FtZUZpbGUgPyBwcmVmaXggKyB5MSA6IHByZWZpeCArIHgxO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBjb25zdCBwcmVmaXggPSB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIHJldHVybiBwcmVmaXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGNhc3RsZU5vdGF0aW9uOiAoc2lkZTogJ2tpbmdzaWRlJyB8ICdxdWVlbnNpZGUnKSA9PiB7XG4gICAgICByZXR1cm4gc2lkZSA9PT0gJ2tpbmdzaWRlJyA/ICdPLU8nIDogJ08tTy1PJztcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYWZmaXggPSB7XG4gICAgY2FwdHVyZTogKG1vdmU6IFNxdWFyZSwgcHJlZml4OiBzdHJpbmcpID0+IHtcbiAgICAgIHJldHVybiBgJHtwcmVmaXh9eCR7bW92ZX1gO1xuICAgIH0sXG4gICAgcHJvbW90ZTogKG1vdmU6IFNxdWFyZSwgcGllY2VUeXBlOiBQaWVjZVR5cGUpID0+IHtcbiAgICAgIGNvbnN0IHN1ZmZpeCA9XG4gICAgICAgIHBpZWNlVHlwZSA9PT0gJ2tuaWdodCcgPyAnTicgOiBwaWVjZVR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgIHJldHVybiBgJHttb3ZlfT0ke3N1ZmZpeH1gO1xuICAgIH0sXG4gICAgY2hlY2s6IChub3RhdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgICByZXR1cm4gYCR7bm90YXRpb259K2A7XG4gICAgfSxcbiAgICBjaGVja21hdGU6IChub3RhdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgICByZXR1cm4gYCR7bm90YXRpb259I2A7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0LFxuICAgIGFmZml4LFxuICAgIGluc2VydE1vdmU6IChub3RhdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBsYXN0TW92ZVBhaXIgPSBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgICBpZiAobGFzdE1vdmVQYWlyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBsYXN0TW92ZVBhaXIucHVzaChub3RhdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBuZXdNb3ZlUGFpciA9IFtub3RhdGlvbl07XG4gICAgICAgIGhpc3RvcnkucHVzaChuZXdNb3ZlUGFpcik7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuIl0sIm5hbWVzIjpbImdldExlZ2FsTW92ZXMiLCJIaXN0b3J5IiwicHJldkhpc3RvcnkiLCJib2FyZCIsInBpZWNlTWFwIiwiaGlzdG9yeSIsImdldCIsInBpZWNlUHJlZml4IiwiZnJvbSIsInRvIiwidHlwZSIsImNvbG9yIiwiX2EiLCJwaWVjZSIsInByZWZpeCIsImxlbmd0aCIsImZvckVhY2giLCJzIiwiYm9hcmRDb3B5IiwiTWFwIiwic2V0IiwiaW5jbHVkZXMiLCJ4MSIsInkxIiwic3BsaXQiLCJ4MiIsInNhbWVGaWxlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJjYXN0bGVOb3RhdGlvbiIsInNpZGUiLCJhZmZpeCIsImNhcHR1cmUiLCJtb3ZlIiwicHJvbW90ZSIsInBpZWNlVHlwZSIsInN1ZmZpeCIsImNoZWNrIiwibm90YXRpb24iLCJjaGVja21hdGUiLCJpbnNlcnRNb3ZlIiwibGFzdE1vdmVQYWlyIiwicHVzaCIsIm5ld01vdmVQYWlyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/History.ts\n");

/***/ }),

/***/ "./src/Piece.ts":
/*!**********************!*\
  !*** ./src/Piece.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_moves__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/moves */ \"./src/utils/moves.ts\");\n/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/helpers */ \"./src/utils/helpers.ts\");\n\n\n\nconst Piece = (color, type) => {\n  function hasMove(from, to) {\n    switch (type) {\n      case 'king':\n        {\n          const oneSquareVert = _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].yByN(1)(from)(to) && _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].xByN(0)(from)(to);\n          const oneSquareLateral = _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].xByN(1)(from)(to) && _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].yByN(0)(from)(to);\n          const oneSquareDiagonally = _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].yByN(1)(from)(to) && _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].xByN(1)(from)(to);\n          return from !== to && (oneSquareDiagonally || oneSquareVert || oneSquareLateral);\n        }\n\n      case 'queen':\n        {\n          return from !== to && (_utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].diagonal(from)(to) || _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].vertAndLateral(from)(to));\n        }\n\n      case 'bishop':\n        {\n          return from !== to && _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].diagonal(from)(to);\n        }\n\n      case 'knight':\n        {\n          return from !== to && (_utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].xByN(1)(from)(to) && _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].yByN(2)(from)(to) || _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].xByN(2)(from)(to) && _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].yByN(1)(from)(to));\n        }\n\n      case 'rook':\n        {\n          return from !== to && _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].vertAndLateral(to)(from);\n        }\n\n      case 'pawn':\n        {\n          const {\n            x: x1,\n            y: y1\n          } = (0,_utils_helpers__WEBPACK_IMPORTED_MODULE_1__.toXY)(from);\n          const {\n            x: x2,\n            y: y2\n          } = (0,_utils_helpers__WEBPACK_IMPORTED_MODULE_1__.toXY)(to);\n          const onlyMovesInFront = color === 'white' ? y1 < y2 : y1 > y2;\n          const regularMove = _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].yByN(1)(from)(to) && x1 === x2;\n          const firstMove = color === 'white' ? y1 === 2 : y1 === 7;\n          const jumpTwo = _utils_moves__WEBPACK_IMPORTED_MODULE_0__[\"default\"].yByN(2)(from)(to) && x1 === x2;\n          return from !== to && onlyMovesInFront && (regularMove || firstMove && jumpTwo);\n        }\n    }\n  }\n\n  function getPawnCaptures(origin) {\n    if (type !== 'pawn') return;\n    const {\n      x,\n      y\n    } = (0,_utils_helpers__WEBPACK_IMPORTED_MODULE_1__.toXY)(origin);\n    const newY = color === 'white' ? y + 1 : y - 1;\n    const captureOne = {\n      x: x + 1,\n      y: newY\n    };\n    const captureTwo = {\n      x: x - 1,\n      y: newY\n    };\n    return [(0,_utils_helpers__WEBPACK_IMPORTED_MODULE_1__.fromXY)(captureOne), (0,_utils_helpers__WEBPACK_IMPORTED_MODULE_1__.fromXY)(captureTwo)];\n  }\n\n  return {\n    hasMove,\n    getPawnCaptures,\n\n    get type() {\n      return type;\n    },\n\n    get color() {\n      return color;\n    }\n\n  };\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Piece);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FjLGdCQURBLEtBRUNDLFdBQVcsSUFBS0MsU0FBUyxJQUFJQyxPQUY5QixDQURGO0FBS0Q7QUFoREg7QUFrREQ7O0FBRUQsV0FBU0MsZUFBVCxDQUF5QkMsTUFBekIsRUFBdUM7QUFDckMsUUFBSXRCLElBQUksS0FBSyxNQUFiLEVBQXFCO0FBRXJCLFVBQU07QUFBRVcsT0FBRjtBQUFLRTtBQUFMLFFBQVdqQixvREFBSSxDQUFDMEIsTUFBRCxDQUFyQjtBQUVBLFVBQU1DLElBQUksR0FBR3hCLEtBQUssS0FBSyxPQUFWLEdBQW9CYyxDQUFDLEdBQUcsQ0FBeEIsR0FBNEJBLENBQUMsR0FBRyxDQUE3QztBQUVBLFVBQU1XLFVBQVUsR0FBRztBQUFFYixPQUFDLEVBQUVBLENBQUMsR0FBRyxDQUFUO0FBQVlFLE9BQUMsRUFBRVU7QUFBZixLQUFuQjtBQUNBLFVBQU1FLFVBQVUsR0FBRztBQUFFZCxPQUFDLEVBQUVBLENBQUMsR0FBRyxDQUFUO0FBQVlFLE9BQUMsRUFBRVU7QUFBZixLQUFuQjtBQUVBLFdBQU8sQ0FBQzFCLHNEQUFNLENBQUMyQixVQUFELENBQVAsRUFBcUIzQixzREFBTSxDQUFDNEIsVUFBRCxDQUEzQixDQUFQO0FBQ0Q7O0FBRUQsU0FBTztBQUNMeEIsV0FESztBQUVMb0IsbUJBRks7O0FBR0wsUUFBSXJCLElBQUosR0FBUTtBQUNOLGFBQU9BLElBQVA7QUFDRCxLQUxJOztBQU1MLFFBQUlELEtBQUosR0FBUztBQUNQLGFBQU9BLEtBQVA7QUFDRDs7QUFSSSxHQUFQO0FBVUQsQ0E3RUQ7O0FBK0VBLGlFQUFlRCxLQUFmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3JvQ2hlc3MvLi9zcmMvUGllY2UudHM/MmViOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW92ZXMgZnJvbSAnLi91dGlscy9tb3Zlcyc7XG5pbXBvcnQgeyB0b1hZLCBmcm9tWFkgfSBmcm9tICcuL3V0aWxzL2hlbHBlcnMnO1xuXG5pbXBvcnQgeyBDb2xvciwgU3F1YXJlLCBQaWVjZVR5cGUgfSBmcm9tICcuL3R5cGVzL3R5cGVzJztcblxuY29uc3QgUGllY2UgPSAoY29sb3I6IENvbG9yLCB0eXBlOiBQaWVjZVR5cGUpID0+IHtcbiAgZnVuY3Rpb24gaGFzTW92ZShmcm9tOiBTcXVhcmUsIHRvOiBTcXVhcmUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ2tpbmcnOiB7XG4gICAgICAgIGNvbnN0IG9uZVNxdWFyZVZlcnQgPVxuICAgICAgICAgIG1vdmVzLnlCeU4oMSkoZnJvbSkodG8pICYmIG1vdmVzLnhCeU4oMCkoZnJvbSkodG8pO1xuICAgICAgICBjb25zdCBvbmVTcXVhcmVMYXRlcmFsID1cbiAgICAgICAgICBtb3Zlcy54QnlOKDEpKGZyb20pKHRvKSAmJiBtb3Zlcy55QnlOKDApKGZyb20pKHRvKTtcbiAgICAgICAgY29uc3Qgb25lU3F1YXJlRGlhZ29uYWxseSA9XG4gICAgICAgICAgbW92ZXMueUJ5TigxKShmcm9tKSh0bykgJiYgbW92ZXMueEJ5TigxKShmcm9tKSh0byk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBmcm9tICE9PSB0byAmJlxuICAgICAgICAgIChvbmVTcXVhcmVEaWFnb25hbGx5IHx8IG9uZVNxdWFyZVZlcnQgfHwgb25lU3F1YXJlTGF0ZXJhbClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3F1ZWVuJzoge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGZyb20gIT09IHRvICYmXG4gICAgICAgICAgKG1vdmVzLmRpYWdvbmFsKGZyb20pKHRvKSB8fCBtb3Zlcy52ZXJ0QW5kTGF0ZXJhbChmcm9tKSh0bykpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjYXNlICdiaXNob3AnOiB7XG4gICAgICAgIHJldHVybiBmcm9tICE9PSB0byAmJiBtb3Zlcy5kaWFnb25hbChmcm9tKSh0byk7XG4gICAgICB9XG4gICAgICBjYXNlICdrbmlnaHQnOiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgZnJvbSAhPT0gdG8gJiZcbiAgICAgICAgICAoKG1vdmVzLnhCeU4oMSkoZnJvbSkodG8pICYmIG1vdmVzLnlCeU4oMikoZnJvbSkodG8pKSB8fFxuICAgICAgICAgICAgKG1vdmVzLnhCeU4oMikoZnJvbSkodG8pICYmIG1vdmVzLnlCeU4oMSkoZnJvbSkodG8pKSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3Jvb2snOiB7XG4gICAgICAgIHJldHVybiBmcm9tICE9PSB0byAmJiBtb3Zlcy52ZXJ0QW5kTGF0ZXJhbCh0bykoZnJvbSk7XG4gICAgICB9XG4gICAgICBjYXNlICdwYXduJzoge1xuICAgICAgICBjb25zdCB7IHg6IHgxLCB5OiB5MSB9ID0gdG9YWShmcm9tKTtcbiAgICAgICAgY29uc3QgeyB4OiB4MiwgeTogeTIgfSA9IHRvWFkodG8pO1xuXG4gICAgICAgIGNvbnN0IG9ubHlNb3Zlc0luRnJvbnQgPSBjb2xvciA9PT0gJ3doaXRlJyA/IHkxIDwgeTIgOiB5MSA+IHkyO1xuICAgICAgICBjb25zdCByZWd1bGFyTW92ZSA9IG1vdmVzLnlCeU4oMSkoZnJvbSkodG8pICYmIHgxID09PSB4MjtcblxuICAgICAgICBjb25zdCBmaXJzdE1vdmUgPSBjb2xvciA9PT0gJ3doaXRlJyA/IHkxID09PSAyIDogeTEgPT09IDc7XG4gICAgICAgIGNvbnN0IGp1bXBUd28gPSBtb3Zlcy55QnlOKDIpKGZyb20pKHRvKSAmJiB4MSA9PT0geDI7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBmcm9tICE9PSB0byAmJlxuICAgICAgICAgIG9ubHlNb3Zlc0luRnJvbnQgJiZcbiAgICAgICAgICAocmVndWxhck1vdmUgfHwgKGZpcnN0TW92ZSAmJiBqdW1wVHdvKSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQYXduQ2FwdHVyZXMob3JpZ2luOiBTcXVhcmUpIHtcbiAgICBpZiAodHlwZSAhPT0gJ3Bhd24nKSByZXR1cm47XG5cbiAgICBjb25zdCB7IHgsIHkgfSA9IHRvWFkob3JpZ2luKTtcblxuICAgIGNvbnN0IG5ld1kgPSBjb2xvciA9PT0gJ3doaXRlJyA/IHkgKyAxIDogeSAtIDE7XG5cbiAgICBjb25zdCBjYXB0dXJlT25lID0geyB4OiB4ICsgMSwgeTogbmV3WSB9O1xuICAgIGNvbnN0IGNhcHR1cmVUd28gPSB7IHg6IHggLSAxLCB5OiBuZXdZIH07XG5cbiAgICByZXR1cm4gW2Zyb21YWShjYXB0dXJlT25lKSwgZnJvbVhZKGNhcHR1cmVUd28pXTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaGFzTW92ZSxcbiAgICBnZXRQYXduQ2FwdHVyZXMsXG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICByZXR1cm4gdHlwZTtcbiAgICB9LFxuICAgIGdldCBjb2xvcigpIHtcbiAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQaWVjZTtcbiJdLCJuYW1lcyI6WyJtb3ZlcyIsInRvWFkiLCJmcm9tWFkiLCJQaWVjZSIsImNvbG9yIiwidHlwZSIsImhhc01vdmUiLCJmcm9tIiwidG8iLCJvbmVTcXVhcmVWZXJ0IiwieUJ5TiIsInhCeU4iLCJvbmVTcXVhcmVMYXRlcmFsIiwib25lU3F1YXJlRGlhZ29uYWxseSIsImRpYWdvbmFsIiwidmVydEFuZExhdGVyYWwiLCJ4IiwieDEiLCJ5IiwieTEiLCJ4MiIsInkyIiwib25seU1vdmVzSW5Gcm9udCIsInJlZ3VsYXJNb3ZlIiwiZmlyc3RNb3ZlIiwianVtcFR3byIsImdldFBhd25DYXB0dXJlcyIsIm9yaWdpbiIsIm5ld1kiLCJjYXB0dXJlT25lIiwiY2FwdHVyZVR3byJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Piece.ts\n");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Gameboard\": () => (/* reexport safe */ _Gameboard__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   \"History\": () => (/* reexport safe */ _History__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   \"files\": () => (/* reexport safe */ _ranksAndFiles__WEBPACK_IMPORTED_MODULE_3__.files),\n/* harmony export */   \"ranks\": () => (/* reexport safe */ _ranksAndFiles__WEBPACK_IMPORTED_MODULE_3__.ranks),\n/* harmony export */   \"startingPositions\": () => (/* reexport module object */ _startingPositions__WEBPACK_IMPORTED_MODULE_2__)\n/* harmony export */ });\n/* harmony import */ var _Gameboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Gameboard */ \"./src/Gameboard.ts\");\n/* harmony import */ var _History__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./History */ \"./src/History.ts\");\n/* harmony import */ var _startingPositions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./startingPositions */ \"./src/startingPositions.ts\");\n/* harmony import */ var _ranksAndFiles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ranksAndFiles */ \"./src/ranksAndFiles.ts\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nyb0NoZXNzLy4vc3JjL21haW4udHM/Y2Q0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2FtZWJvYXJkIGZyb20gJy4vR2FtZWJvYXJkJztcbmltcG9ydCBIaXN0b3J5IGZyb20gJy4vSGlzdG9yeSc7XG5pbXBvcnQgKiBhcyBzdGFydGluZ1Bvc2l0aW9ucyBmcm9tICcuL3N0YXJ0aW5nUG9zaXRpb25zJztcbmltcG9ydCB7IHJhbmtzLCBmaWxlcyB9IGZyb20gJy4vcmFua3NBbmRGaWxlcyc7XG5cbmV4cG9ydCB7IEdhbWVib2FyZCwgSGlzdG9yeSwgc3RhcnRpbmdQb3NpdGlvbnMsIHJhbmtzLCBmaWxlcyB9O1xuIl0sIm5hbWVzIjpbIkdhbWVib2FyZCIsIkhpc3RvcnkiLCJzdGFydGluZ1Bvc2l0aW9ucyIsInJhbmtzIiwiZmlsZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main.ts\n");

/***/ }),

/***/ "./src/ranksAndFiles.ts":
/*!******************************!*\
  !*** ./src/ranksAndFiles.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"files\": () => (/* binding */ files),\n/* harmony export */   \"ranks\": () => (/* binding */ ranks)\n/* harmony export */ });\nconst files = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\nconst ranks = [1, 2, 3, 4, 5, 6, 7, 8];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmFua3NBbmRGaWxlcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLE1BQU1BLEtBQUssR0FBRyxDQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsR0FBWCxFQUFnQixHQUFoQixFQUFxQixHQUFyQixFQUEwQixHQUExQixFQUErQixHQUEvQixFQUFvQyxHQUFwQyxDQUFkO0FBQ0EsTUFBTUMsS0FBSyxHQUFHLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVixFQUFhLENBQWIsRUFBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkIsRUFBc0IsQ0FBdEIsQ0FBZCIsInNvdXJjZXMiOlsid2VicGFjazovL2Nyb0NoZXNzLy4vc3JjL3JhbmtzQW5kRmlsZXMudHM/ZTYyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmaWxlcyA9IFsnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZycsICdoJ107XG5jb25zdCByYW5rcyA9IFsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4XTtcblxuZXhwb3J0IHsgZmlsZXMsIHJhbmtzIH07XG4iXSwibmFtZXMiOlsiZmlsZXMiLCJyYW5rcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/ranksAndFiles.ts\n");

/***/ }),

/***/ "./src/startingPositions.ts":
/*!**********************************!*\
  !*** ./src/startingPositions.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"standard\": () => (/* binding */ standard)\n/* harmony export */ });\nconst standard = {\n  white: {\n    rook: ['a1', 'h1'],\n    knight: ['g1', 'b1'],\n    bishop: ['f1', 'c1'],\n    king: ['e1'],\n    queen: ['d1'],\n    pawn: ['a2', 'b2', 'c2', 'd2', 'e2', 'f2', 'g2', 'h2']\n  },\n  black: {\n    rook: ['a8', 'h8'],\n    knight: ['g8', 'b8'],\n    bishop: ['f8', 'c8'],\n    king: ['e8'],\n    queen: ['d8'],\n    pawn: ['a7', 'b7', 'c7', 'd7', 'e7', 'f7', 'g7', 'h7']\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RhcnRpbmdQb3NpdGlvbnMudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUVBLE1BQU1BLFFBQVEsR0FBZ0I7QUFDNUJDLE9BQUssRUFBRTtBQUNMQyxRQUFJLEVBQUUsQ0FBQyxJQUFELEVBQU8sSUFBUCxDQUREO0FBRUxDLFVBQU0sRUFBRSxDQUFDLElBQUQsRUFBTyxJQUFQLENBRkg7QUFHTEMsVUFBTSxFQUFFLENBQUMsSUFBRCxFQUFPLElBQVAsQ0FISDtBQUlMQyxRQUFJLEVBQUUsQ0FBQyxJQUFELENBSkQ7QUFLTEMsU0FBSyxFQUFFLENBQUMsSUFBRCxDQUxGO0FBTUxDLFFBQUksRUFBRSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQixJQUEvQixFQUFxQyxJQUFyQyxFQUEyQyxJQUEzQztBQU5ELEdBRHFCO0FBUzVCQyxPQUFLLEVBQUU7QUFDTE4sUUFBSSxFQUFFLENBQUMsSUFBRCxFQUFPLElBQVAsQ0FERDtBQUVMQyxVQUFNLEVBQUUsQ0FBQyxJQUFELEVBQU8sSUFBUCxDQUZIO0FBR0xDLFVBQU0sRUFBRSxDQUFDLElBQUQsRUFBTyxJQUFQLENBSEg7QUFJTEMsUUFBSSxFQUFFLENBQUMsSUFBRCxDQUpEO0FBS0xDLFNBQUssRUFBRSxDQUFDLElBQUQsQ0FMRjtBQU1MQyxRQUFJLEVBQUUsQ0FBQyxJQUFELEVBQU8sSUFBUCxFQUFhLElBQWIsRUFBbUIsSUFBbkIsRUFBeUIsSUFBekIsRUFBK0IsSUFBL0IsRUFBcUMsSUFBckMsRUFBMkMsSUFBM0M7QUFORDtBQVRxQixDQUE5QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nyb0NoZXNzLy4vc3JjL3N0YXJ0aW5nUG9zaXRpb25zLnRzPzNiYmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWxsUGllY2VNYXAgfSBmcm9tICcuL3R5cGVzL2ludGVyZmFjZXMnO1xuXG5jb25zdCBzdGFuZGFyZDogQWxsUGllY2VNYXAgPSB7XG4gIHdoaXRlOiB7XG4gICAgcm9vazogWydhMScsICdoMSddLFxuICAgIGtuaWdodDogWydnMScsICdiMSddLFxuICAgIGJpc2hvcDogWydmMScsICdjMSddLFxuICAgIGtpbmc6IFsnZTEnXSxcbiAgICBxdWVlbjogWydkMSddLFxuICAgIHBhd246IFsnYTInLCAnYjInLCAnYzInLCAnZDInLCAnZTInLCAnZjInLCAnZzInLCAnaDInXVxuICB9LFxuICBibGFjazoge1xuICAgIHJvb2s6IFsnYTgnLCAnaDgnXSxcbiAgICBrbmlnaHQ6IFsnZzgnLCAnYjgnXSxcbiAgICBiaXNob3A6IFsnZjgnLCAnYzgnXSxcbiAgICBraW5nOiBbJ2U4J10sXG4gICAgcXVlZW46IFsnZDgnXSxcbiAgICBwYXduOiBbJ2E3JywgJ2I3JywgJ2M3JywgJ2Q3JywgJ2U3JywgJ2Y3JywgJ2c3JywgJ2g3J11cbiAgfVxufTtcblxuZXhwb3J0IHsgc3RhbmRhcmQgfTtcbiJdLCJuYW1lcyI6WyJzdGFuZGFyZCIsIndoaXRlIiwicm9vayIsImtuaWdodCIsImJpc2hvcCIsImtpbmciLCJxdWVlbiIsInBhd24iLCJibGFjayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/startingPositions.ts\n");

/***/ }),

/***/ "./src/utils/helpers.ts":
/*!******************************!*\
  !*** ./src/utils/helpers.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"calcDistance\": () => (/* binding */ calcDistance),\n/* harmony export */   \"fromXY\": () => (/* binding */ fromXY),\n/* harmony export */   \"toXY\": () => (/* binding */ toXY)\n/* harmony export */ });\nfunction toXY(square) {\n  const [x, y] = square.split('');\n  return {\n    x: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'].indexOf(x.toLowerCase()),\n    y: Number(y)\n  };\n}\n\nfunction fromXY(coord) {\n  const {\n    x,\n    y\n  } = coord;\n  const col = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'][x];\n  if (!col) return '';\n  return col.concat(y.toString());\n}\n\nconst calcDistance = squareOne => squareTwo => {\n  const {\n    x: x1,\n    y: y1\n  } = toXY(squareOne);\n  const {\n    x: x2,\n    y: y2\n  } = toXY(squareTwo);\n  const xDiff = x1 - x2;\n  const yDiff = y1 - y2;\n  return {\n    xDiff,\n    yDiff\n  };\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvaGVscGVycy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFHQSxTQUFTQSxJQUFULENBQWNDLE1BQWQsRUFBNEI7QUFDMUIsUUFBTSxDQUFDQyxDQUFELEVBQUlDLENBQUosSUFBU0YsTUFBTSxDQUFDRyxLQUFQLENBQWEsRUFBYixDQUFmO0FBQ0EsU0FBTztBQUNMRixLQUFDLEVBQUUsQ0FBQyxHQUFELEVBQU0sR0FBTixFQUFXLEdBQVgsRUFBZ0IsR0FBaEIsRUFBcUIsR0FBckIsRUFBMEIsR0FBMUIsRUFBK0IsR0FBL0IsRUFBb0MsR0FBcEMsRUFBeUNHLE9BQXpDLENBQWlESCxDQUFDLENBQUNJLFdBQUYsRUFBakQsQ0FERTtBQUVMSCxLQUFDLEVBQUVJLE1BQU0sQ0FBQ0osQ0FBRDtBQUZKLEdBQVA7QUFJRDs7QUFFRCxTQUFTSyxNQUFULENBQWdCQyxLQUFoQixFQUE0QjtBQUMxQixRQUFNO0FBQUVQLEtBQUY7QUFBS0M7QUFBTCxNQUFXTSxLQUFqQjtBQUNBLFFBQU1DLEdBQUcsR0FBRyxDQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsR0FBWCxFQUFnQixHQUFoQixFQUFxQixHQUFyQixFQUEwQixHQUExQixFQUErQixHQUEvQixFQUFvQyxHQUFwQyxFQUF5Q1IsQ0FBekMsQ0FBWjtBQUNBLE1BQUksQ0FBQ1EsR0FBTCxFQUFVLE9BQU8sRUFBUDtBQUNWLFNBQU9BLEdBQUcsQ0FBQ0MsTUFBSixDQUFXUixDQUFDLENBQUNTLFFBQUYsRUFBWCxDQUFQO0FBQ0Q7O0FBRUQsTUFBTUMsWUFBWSxHQUFJQyxTQUFELElBQXdCQyxTQUFELElBQXNCO0FBQ2hFLFFBQU07QUFBRWIsS0FBQyxFQUFFYyxFQUFMO0FBQVNiLEtBQUMsRUFBRWM7QUFBWixNQUFtQmpCLElBQUksQ0FBQ2MsU0FBRCxDQUE3QjtBQUNBLFFBQU07QUFBRVosS0FBQyxFQUFFZ0IsRUFBTDtBQUFTZixLQUFDLEVBQUVnQjtBQUFaLE1BQW1CbkIsSUFBSSxDQUFDZSxTQUFELENBQTdCO0FBRUEsUUFBTUssS0FBSyxHQUFHSixFQUFFLEdBQUdFLEVBQW5CO0FBQ0EsUUFBTUcsS0FBSyxHQUFHSixFQUFFLEdBQUdFLEVBQW5CO0FBQ0EsU0FBTztBQUNMQyxTQURLO0FBRUxDO0FBRkssR0FBUDtBQUlELENBVkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jcm9DaGVzcy8uL3NyYy91dGlscy9oZWxwZXJzLnRzPzI4ZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29vcmQgfSBmcm9tICcuLi90eXBlcy9pbnRlcmZhY2VzJztcbmltcG9ydCB7IFNxdWFyZSB9IGZyb20gJy4uL3R5cGVzL3R5cGVzJztcblxuZnVuY3Rpb24gdG9YWShzcXVhcmU6IFNxdWFyZSk6IENvb3JkIHtcbiAgY29uc3QgW3gsIHldID0gc3F1YXJlLnNwbGl0KCcnKTtcbiAgcmV0dXJuIHtcbiAgICB4OiBbJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCddLmluZGV4T2YoeC50b0xvd2VyQ2FzZSgpKSxcbiAgICB5OiBOdW1iZXIoeSlcbiAgfTtcbn1cblxuZnVuY3Rpb24gZnJvbVhZKGNvb3JkOiBDb29yZCk6IFNxdWFyZSB7XG4gIGNvbnN0IHsgeCwgeSB9ID0gY29vcmQ7XG4gIGNvbnN0IGNvbCA9IFsnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZycsICdoJ11beF07XG4gIGlmICghY29sKSByZXR1cm4gJyc7XG4gIHJldHVybiBjb2wuY29uY2F0KHkudG9TdHJpbmcoKSk7XG59XG5cbmNvbnN0IGNhbGNEaXN0YW5jZSA9IChzcXVhcmVPbmU6IHN0cmluZykgPT4gKHNxdWFyZVR3bzogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHsgeDogeDEsIHk6IHkxIH0gPSB0b1hZKHNxdWFyZU9uZSk7XG4gIGNvbnN0IHsgeDogeDIsIHk6IHkyIH0gPSB0b1hZKHNxdWFyZVR3byk7XG5cbiAgY29uc3QgeERpZmYgPSB4MSAtIHgyO1xuICBjb25zdCB5RGlmZiA9IHkxIC0geTI7XG4gIHJldHVybiB7XG4gICAgeERpZmYsXG4gICAgeURpZmZcbiAgfTtcbn07XG5cbmV4cG9ydCB7IHRvWFksIGZyb21YWSwgY2FsY0Rpc3RhbmNlIH07XG4iXSwibmFtZXMiOlsidG9YWSIsInNxdWFyZSIsIngiLCJ5Iiwic3BsaXQiLCJpbmRleE9mIiwidG9Mb3dlckNhc2UiLCJOdW1iZXIiLCJmcm9tWFkiLCJjb29yZCIsImNvbCIsImNvbmNhdCIsInRvU3RyaW5nIiwiY2FsY0Rpc3RhbmNlIiwic3F1YXJlT25lIiwic3F1YXJlVHdvIiwieDEiLCJ5MSIsIngyIiwieTIiLCJ4RGlmZiIsInlEaWZmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/helpers.ts\n");

/***/ }),

/***/ "./src/utils/moves.ts":
/*!****************************!*\
  !*** ./src/utils/moves.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"canBlockOrCaptureCheck\": () => (/* binding */ canBlockOrCaptureCheck),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"getAttackingMovesForColor\": () => (/* binding */ getAttackingMovesForColor),\n/* harmony export */   \"getDiscoveredCheck\": () => (/* binding */ getDiscoveredCheck),\n/* harmony export */   \"getLegalMoves\": () => (/* binding */ getLegalMoves),\n/* harmony export */   \"getLegalMovesInCheck\": () => (/* binding */ getLegalMovesInCheck)\n/* harmony export */ });\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers */ \"./src/utils/helpers.ts\");\n/* harmony import */ var _Piece__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Piece */ \"./src/Piece.ts\");\n\n\nconst moves = {\n  vertAndLateral: from => to => {\n    const [x1, y1] = from.split('');\n    const [x2, y2] = to.split('');\n    return x1 === x2 || y1 === y2;\n  },\n  diagonal: from => to => {\n    const {\n      x: x1,\n      y: y1\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.toXY)(from);\n    const {\n      x: x2,\n      y: y2\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.toXY)(to);\n    return Math.abs(x2 - x1) === Math.abs(y2 - y1);\n  },\n  xByN: num => from => to => {\n    const {\n      x: x1\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.toXY)(from);\n    const {\n      x: x2\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.toXY)(to);\n    return Math.abs(x1 - x2) === num;\n  },\n  yByN: num => from => to => {\n    const {\n      y: y1\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.toXY)(from);\n    const {\n      y: y2\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.toXY)(to);\n    return Math.abs(y1 - y2) === num;\n  }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (moves);\n/* dealing with move vectors */\n\nfunction splitIntoVectors(arrayOfMoves, start) {\n  return arrayOfMoves.reduce((acc, curr) => {\n    const {\n      xDiff,\n      yDiff\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.calcDistance)(start)(curr);\n    let vector = '';\n    if (yDiff !== 0) vector = yDiff < 0 ? 'up' : 'down';\n    if (xDiff !== 0) vector += xDiff < 0 ? 'Right' : 'Left'; // normalize vector name\n\n    vector = vector.charAt(0).toLowerCase() + vector.slice(1);\n    acc[vector] = acc[vector] || [];\n    acc[vector].push(curr);\n    return acc;\n  }, {});\n}\n\nfunction getBeginningOfVector(vector) {\n  if (vector.length === 0) return '';\n  return vector.reduce((acc, curr) => {\n    const {\n      x: x1,\n      y: y1\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.toXY)(acc);\n    const {\n      x: x2,\n      y: y2\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.toXY)(curr);\n    const accIsBeginning = x1 === x2 ? y1 < y2 : x1 < x2;\n    return accIsBeginning ? acc : curr;\n  });\n}\n\nconst getMovesAlongVector = (s1, s2, allSquares) => {\n  const liesSameVertOrLat = moves.vertAndLateral(s1)(s2);\n  const liesSameDiagonally = moves.diagonal(s1)(s2);\n  const liesOnSameLine = liesSameVertOrLat || liesSameDiagonally;\n  if (!liesOnSameLine) return [];\n  const matchingVector = liesSameDiagonally ? 'diagonal' : 'vertAndLateral';\n  const squaresAlongVector = allSquares.filter(s => moves[matchingVector](s1)(s) && moves[matchingVector](s2)(s));\n  return squaresAlongVector;\n};\n/* sort moves */\n\n\nconst sortMovesClosestTo = square => moves => {\n  return [...moves].sort((a, b) => {\n    const {\n      xDiff: x1Diff,\n      yDiff: y1Diff\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.calcDistance)(square)(a);\n    const aDiff = Math.abs(x1Diff) + Math.abs(y1Diff);\n    const {\n      xDiff: x2Diff,\n      yDiff: y2Diff\n    } = (0,_helpers__WEBPACK_IMPORTED_MODULE_0__.calcDistance)(square)(b);\n    const bDiff = Math.abs(x2Diff) + Math.abs(y2Diff);\n    return aDiff - bDiff;\n  });\n};\n/* get moves */\n\n\nfunction getPossibleMoves(origin, board) {\n  // get all moves that can happen if no other pieces were on the board\n  const allSquares = Array.from(board.keys());\n  const square = board.get(origin);\n  const {\n    type,\n    color\n  } = square.piece;\n  const piece = (0,_Piece__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(color, type);\n  return allSquares.filter(s => piece.hasMove(origin, s));\n}\n\nfunction getLegalMoves(origin, board) {\n  // get moves regardless of whether or not there is check\n  const square = board.get(origin);\n  const piece = square.piece;\n  const possibleMoves = getPossibleMoves(origin, board);\n  const obstructions = possibleMoves.filter(s => {\n    var _a;\n\n    return (_a = board.get(s)) === null || _a === void 0 ? void 0 : _a.piece;\n  });\n\n  if (!obstructions.length) {\n    if (piece.type === 'pawn') return [...getPawnCaptures(origin, board), ...possibleMoves];\n    return possibleMoves;\n  }\n\n  let legalMoves = [];\n\n  switch (piece.type) {\n    case 'knight':\n      {\n        legalMoves = possibleMoves;\n        break;\n      }\n\n    case 'pawn':\n      {\n        const capturesAvailable = getPawnCaptures(origin, board);\n        const unobstructedMoves = removeMovesWithPieces(removeObstructedMoves(origin, possibleMoves, obstructions), board);\n        legalMoves = [...capturesAvailable, ...unobstructedMoves];\n        break;\n      }\n\n    case 'king':\n      {\n        legalMoves = removeProtectedSquares(piece, possibleMoves, board);\n        break;\n      }\n\n    default:\n      {\n        legalMoves = removeObstructedMoves(origin, possibleMoves, obstructions);\n      }\n  }\n\n  return removeMovesWithPieces(legalMoves, board, piece.color);\n}\n\nfunction getLegalMovesInCheck(origin, board, kingPos, squareGivingCheck) {\n  const squaresThatDealWithCheck = getSquaresBetweenKingAndCheck(kingPos, squareGivingCheck, Array.from(board.keys()));\n  const moves = getLegalMoves(origin, board);\n  return moves.filter(s => squaresThatDealWithCheck.includes(s));\n}\n\nfunction getAttackingMoves(origin, board) {\n  // for when you need to check for if squares are protected\n  const square = board.get(origin);\n  const {\n    type,\n    color\n  } = square.piece;\n\n  switch (type) {\n    case 'pawn':\n      {\n        const piece = (0,_Piece__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(color, 'pawn');\n        return piece.getPawnCaptures(origin);\n      }\n\n    default:\n      return getLegalMoves(origin, board);\n  }\n}\n\nfunction getAllMovesForColor(color, board) {\n  const allMoves = [];\n\n  for (const [square, {\n    piece\n  }] of board.entries()) {\n    if (!piece) continue;\n    if (piece.color !== color) continue;\n    allMoves.push(getLegalMoves(square, board));\n  }\n\n  return allMoves.flat();\n}\n\nfunction getAttackingMovesForColor(color, board) {\n  const allMoves = [];\n\n  for (const [square, {\n    piece\n  }] of board.entries()) {\n    if (!piece) continue;\n    if (piece.color !== color) continue;\n    allMoves.push(getAttackingMoves(square, board));\n  }\n\n  return allMoves.flat();\n}\n\nfunction getPawnCaptures(pawnSquare, board) {\n  var _a;\n\n  const {\n    color\n  } = (_a = board.get(pawnSquare)) === null || _a === void 0 ? void 0 : _a.piece;\n  const pawn = (0,_Piece__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(color, 'pawn');\n  const captureMoves = pawn.getPawnCaptures(pawnSquare);\n  if (!captureMoves) return [];\n  return captureMoves.filter(s => {\n    const squareVal = board.get(s);\n    if (!squareVal) return false;\n    const piece = squareVal.piece;\n    const enPassant = squareVal.enPassant;\n    return piece && piece.color !== pawn.color || enPassant && enPassant.color !== pawn.color;\n  });\n}\n\nfunction getSquaresBetweenKingAndCheck(kingPos, checkPos, allSquares) {\n  // includes kingPos and checkPos\n  const squaresAlongVector = getMovesAlongVector(kingPos, checkPos, allSquares);\n  const squaresBetweenKingAndPiece = removeMovesBehindTwoSquares(kingPos, checkPos, squaresAlongVector);\n  return squaresBetweenKingAndPiece;\n}\n/* filter moves */\n\n\nfunction removeMovesBehindTwoSquares(s1, s2, vector) {\n  const sorted = sortMovesClosestTo(getBeginningOfVector(vector))(vector);\n  let furthestSquare;\n  let closestSquare;\n\n  if (sorted.indexOf(s1) > sorted.indexOf(s2)) {\n    furthestSquare = s1;\n    closestSquare = s2;\n  } else {\n    furthestSquare = s2;\n    closestSquare = s1;\n  }\n\n  const removedOneEnd = removeMovesBehindSquare(furthestSquare)(sorted);\n  const removedBothEnds = removeMovesBehindSquare(closestSquare)(removedOneEnd.reverse());\n  return removedBothEnds;\n}\n\nconst removeMovesBehindSquare = square => moves => {\n  const copy = [...moves];\n  const index = moves.indexOf(square);\n  if (index === -1) return [];\n  copy.splice(index + 1);\n  return copy;\n};\n\nfunction removeObstructedMoves(startingSquare, possibleMoves, obstructions) {\n  // a) split possible moves into vectors (up,down,left,right, and/or diagonals)\n  // b) see which obstructions belong to which vector\n  // c) find the closest obstruction\n  // d) remove all the moves behind that obstruction\n  const filteredMoves = [];\n  const allVectors = splitIntoVectors(possibleMoves, startingSquare);\n  const obstructionVectors = splitIntoVectors(obstructions, startingSquare);\n\n  for (const vector in allVectors) {\n    if (!obstructionVectors[vector]) {\n      // look for vector obstruction is on\n      filteredMoves.push(allVectors[vector]);\n      continue;\n    }\n\n    const sorted = sortMovesClosestTo(startingSquare)(allVectors[vector]);\n    const closestObstruction = sortMovesClosestTo(startingSquare)(obstructionVectors[vector])[0];\n    filteredMoves.push(removeMovesBehindSquare(closestObstruction)(sorted));\n  }\n\n  return filteredMoves.flat();\n}\n\nfunction removeProtectedSquares(king, possibleMoves, board) {\n  // bc king cant move if square is protected\n  const oppColor = king.color === 'white' ? 'black' : 'white';\n  const allEnemyMoves = getAttackingMovesForColor(oppColor, board);\n  return possibleMoves.filter(s => {\n    return !allEnemyMoves.includes(s);\n  });\n}\n\nfunction removeMovesWithPieces(moves, board, color) {\n  return moves.filter(s => {\n    const squareVal = board.get(s);\n    if (!squareVal) return false;\n    if (color) return !squareVal.piece || squareVal.piece.color !== color;else return !squareVal.piece;\n  });\n}\n/* gameboard checks */\n\n\nfunction getDiscoveredCheck(kingPos, kingColor, vacated, board) {\n  var _a; // openSquare is a square just vacated\n\n\n  let squaresAlongVector = getMovesAlongVector(kingPos, vacated, Array.from(board.keys()));\n  squaresAlongVector = squaresAlongVector.filter(s => s !== kingPos && s !== vacated);\n  if (!squaresAlongVector.length) return '';\n\n  for (const square of squaresAlongVector) {\n    const piece = (_a = board.get(square)) === null || _a === void 0 ? void 0 : _a.piece;\n    if (!piece || piece.color === kingColor) continue;\n    const legalMoves = getLegalMoves(square, board);\n    if (legalMoves.includes(kingPos)) return square;\n  }\n\n  return '';\n}\n\nfunction canBlockOrCaptureCheck(kingPos, squareGivingCheck, board) {\n  var _a;\n\n  const king = (_a = board.get(kingPos)) === null || _a === void 0 ? void 0 : _a.piece;\n  const blockOrCaptureSquares = getSquaresBetweenKingAndCheck(kingPos, squareGivingCheck, Array.from(board.keys())); // also includes check square\n\n  const ownPieceMoves = getAllMovesForColor(king.color, board);\n  return ownPieceMoves.some(move => blockOrCaptureSquares.includes(move));\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxJQUEvQixDQUE3QixDQUFQO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jcm9DaGVzcy8uL3NyYy91dGlscy9tb3Zlcy50cz81MGZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNhbGNEaXN0YW5jZSwgdG9YWSB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQge1xuICBQaWVjZUludGVyZmFjZSxcbiAgU3F1YXJlT2JqLFxuICBQaWVjZU9iaixcbiAgRW5QYXNzYW50T2JqXG59IGZyb20gJy4uL3R5cGVzL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgTW92ZXMsIEJvYXJkLCBTcXVhcmUsIENvbG9yIH0gZnJvbSAnLi4vdHlwZXMvdHlwZXMnO1xuaW1wb3J0IFBpZWNlIGZyb20gJy4uL1BpZWNlJztcblxuY29uc3QgbW92ZXMgPSB7XG4gIHZlcnRBbmRMYXRlcmFsOiAoZnJvbTogU3F1YXJlKSA9PiAodG86IFNxdWFyZSkgPT4ge1xuICAgIGNvbnN0IFt4MSwgeTFdID0gZnJvbS5zcGxpdCgnJyk7XG4gICAgY29uc3QgW3gyLCB5Ml0gPSB0by5zcGxpdCgnJyk7XG4gICAgcmV0dXJuIHgxID09PSB4MiB8fCB5MSA9PT0geTI7XG4gIH0sXG4gIGRpYWdvbmFsOiAoZnJvbTogU3F1YXJlKSA9PiAodG86IFNxdWFyZSkgPT4ge1xuICAgIGNvbnN0IHsgeDogeDEsIHk6IHkxIH0gPSB0b1hZKGZyb20pO1xuICAgIGNvbnN0IHsgeDogeDIsIHk6IHkyIH0gPSB0b1hZKHRvKTtcbiAgICByZXR1cm4gTWF0aC5hYnMoeDIgLSB4MSkgPT09IE1hdGguYWJzKHkyIC0geTEpO1xuICB9LFxuICB4QnlOOiAobnVtOiBudW1iZXIpID0+IChmcm9tOiBTcXVhcmUpID0+ICh0bzogU3F1YXJlKSA9PiB7XG4gICAgY29uc3QgeyB4OiB4MSB9ID0gdG9YWShmcm9tKTtcbiAgICBjb25zdCB7IHg6IHgyIH0gPSB0b1hZKHRvKTtcbiAgICByZXR1cm4gTWF0aC5hYnMoeDEgLSB4MikgPT09IG51bTtcbiAgfSxcbiAgeUJ5TjogKG51bTogbnVtYmVyKSA9PiAoZnJvbTogU3F1YXJlKSA9PiAodG86IFNxdWFyZSkgPT4ge1xuICAgIGNvbnN0IHsgeTogeTEgfSA9IHRvWFkoZnJvbSk7XG4gICAgY29uc3QgeyB5OiB5MiB9ID0gdG9YWSh0byk7XG4gICAgcmV0dXJuIE1hdGguYWJzKHkxIC0geTIpID09PSBudW07XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1vdmVzO1xuXG4vKiBkZWFsaW5nIHdpdGggbW92ZSB2ZWN0b3JzICovXG5cbmZ1bmN0aW9uIHNwbGl0SW50b1ZlY3RvcnMoYXJyYXlPZk1vdmVzOiBNb3Zlcywgc3RhcnQ6IFNxdWFyZSkge1xuICBpbnRlcmZhY2UgVmVjdG9ycyB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nW107XG4gIH1cbiAgcmV0dXJuIGFycmF5T2ZNb3Zlcy5yZWR1Y2UoKGFjYzogVmVjdG9ycywgY3VycjogU3F1YXJlKSA9PiB7XG4gICAgY29uc3QgeyB4RGlmZiwgeURpZmYgfSA9IGNhbGNEaXN0YW5jZShzdGFydCkoY3Vycik7XG5cbiAgICBsZXQgdmVjdG9yID0gJyc7XG4gICAgaWYgKHlEaWZmICE9PSAwKSB2ZWN0b3IgPSB5RGlmZiA8IDAgPyAndXAnIDogJ2Rvd24nO1xuICAgIGlmICh4RGlmZiAhPT0gMCkgdmVjdG9yICs9IHhEaWZmIDwgMCA/ICdSaWdodCcgOiAnTGVmdCc7XG5cbiAgICAvLyBub3JtYWxpemUgdmVjdG9yIG5hbWVcbiAgICB2ZWN0b3IgPSB2ZWN0b3IuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyB2ZWN0b3Iuc2xpY2UoMSk7XG5cbiAgICBhY2NbdmVjdG9yXSA9IGFjY1t2ZWN0b3JdIHx8IFtdO1xuICAgIGFjY1t2ZWN0b3JdLnB1c2goY3Vycik7XG5cbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIGdldEJlZ2lubmluZ09mVmVjdG9yKHZlY3RvcjogTW92ZXMpIHtcbiAgaWYgKHZlY3Rvci5sZW5ndGggPT09IDApIHJldHVybiAnJztcblxuICByZXR1cm4gdmVjdG9yLnJlZHVjZSgoYWNjLCBjdXJyKSA9PiB7XG4gICAgY29uc3QgeyB4OiB4MSwgeTogeTEgfSA9IHRvWFkoYWNjKTtcbiAgICBjb25zdCB7IHg6IHgyLCB5OiB5MiB9ID0gdG9YWShjdXJyKTtcblxuICAgIGNvbnN0IGFjY0lzQmVnaW5uaW5nID0geDEgPT09IHgyID8geTEgPCB5MiA6IHgxIDwgeDI7XG4gICAgcmV0dXJuIGFjY0lzQmVnaW5uaW5nID8gYWNjIDogY3VycjtcbiAgfSk7XG59XG5cbmNvbnN0IGdldE1vdmVzQWxvbmdWZWN0b3IgPSAoXG4gIHMxOiBTcXVhcmUsXG4gIHMyOiBTcXVhcmUsXG4gIGFsbFNxdWFyZXM6IE1vdmVzXG4pOiBNb3ZlcyA9PiB7XG4gIGNvbnN0IGxpZXNTYW1lVmVydE9yTGF0ID0gbW92ZXMudmVydEFuZExhdGVyYWwoczEpKHMyKTtcbiAgY29uc3QgbGllc1NhbWVEaWFnb25hbGx5ID0gbW92ZXMuZGlhZ29uYWwoczEpKHMyKTtcblxuICBjb25zdCBsaWVzT25TYW1lTGluZSA9IGxpZXNTYW1lVmVydE9yTGF0IHx8IGxpZXNTYW1lRGlhZ29uYWxseTtcbiAgaWYgKCFsaWVzT25TYW1lTGluZSkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IG1hdGNoaW5nVmVjdG9yID0gbGllc1NhbWVEaWFnb25hbGx5ID8gJ2RpYWdvbmFsJyA6ICd2ZXJ0QW5kTGF0ZXJhbCc7XG5cbiAgY29uc3Qgc3F1YXJlc0Fsb25nVmVjdG9yID0gYWxsU3F1YXJlcy5maWx0ZXIoXG4gICAgKHMpID0+IG1vdmVzW21hdGNoaW5nVmVjdG9yXShzMSkocykgJiYgbW92ZXNbbWF0Y2hpbmdWZWN0b3JdKHMyKShzKVxuICApO1xuICByZXR1cm4gc3F1YXJlc0Fsb25nVmVjdG9yO1xufTtcblxuLyogc29ydCBtb3ZlcyAqL1xuXG5jb25zdCBzb3J0TW92ZXNDbG9zZXN0VG8gPVxuICAoc3F1YXJlOiBTcXVhcmUpID0+XG4gIChtb3ZlczogTW92ZXMpOiBNb3ZlcyA9PiB7XG4gICAgcmV0dXJuIFsuLi5tb3Zlc10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgeyB4RGlmZjogeDFEaWZmLCB5RGlmZjogeTFEaWZmIH0gPSBjYWxjRGlzdGFuY2Uoc3F1YXJlKShhKTtcbiAgICAgIGNvbnN0IGFEaWZmID0gTWF0aC5hYnMoeDFEaWZmKSArIE1hdGguYWJzKHkxRGlmZik7XG5cbiAgICAgIGNvbnN0IHsgeERpZmY6IHgyRGlmZiwgeURpZmY6IHkyRGlmZiB9ID0gY2FsY0Rpc3RhbmNlKHNxdWFyZSkoYik7XG4gICAgICBjb25zdCBiRGlmZiA9IE1hdGguYWJzKHgyRGlmZikgKyBNYXRoLmFicyh5MkRpZmYpO1xuXG4gICAgICByZXR1cm4gYURpZmYgLSBiRGlmZjtcbiAgICB9KTtcbiAgfTtcblxuLyogZ2V0IG1vdmVzICovXG5cbmZ1bmN0aW9uIGdldFBvc3NpYmxlTW92ZXMob3JpZ2luOiBTcXVhcmUsIGJvYXJkOiBCb2FyZCkge1xuICAvLyBnZXQgYWxsIG1vdmVzIHRoYXQgY2FuIGhhcHBlbiBpZiBubyBvdGhlciBwaWVjZXMgd2VyZSBvbiB0aGUgYm9hcmRcbiAgY29uc3QgYWxsU3F1YXJlcyA9IEFycmF5LmZyb20oYm9hcmQua2V5cygpKTtcblxuICBjb25zdCBzcXVhcmUgPSBib2FyZC5nZXQob3JpZ2luKSBhcyBTcXVhcmVPYmo7XG5cbiAgY29uc3QgeyB0eXBlLCBjb2xvciB9ID0gc3F1YXJlLnBpZWNlIGFzIFBpZWNlT2JqO1xuICBjb25zdCBwaWVjZSA9IFBpZWNlKGNvbG9yLCB0eXBlKTtcblxuICByZXR1cm4gYWxsU3F1YXJlcy5maWx0ZXIoKHMpID0+IHBpZWNlLmhhc01vdmUob3JpZ2luLCBzKSk7XG59XG5cbmZ1bmN0aW9uIGdldExlZ2FsTW92ZXMob3JpZ2luOiBTcXVhcmUsIGJvYXJkOiBCb2FyZCkge1xuICAvLyBnZXQgbW92ZXMgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIG9yIG5vdCB0aGVyZSBpcyBjaGVja1xuXG4gIGNvbnN0IHNxdWFyZSA9IGJvYXJkLmdldChvcmlnaW4pIGFzIFNxdWFyZU9iajtcblxuICBjb25zdCBwaWVjZSA9IHNxdWFyZS5waWVjZSBhcyBQaWVjZU9iajtcblxuICBjb25zdCBwb3NzaWJsZU1vdmVzID0gZ2V0UG9zc2libGVNb3ZlcyhvcmlnaW4sIGJvYXJkKTtcblxuICBjb25zdCBvYnN0cnVjdGlvbnMgPSBwb3NzaWJsZU1vdmVzLmZpbHRlcigocykgPT4gYm9hcmQuZ2V0KHMpPy5waWVjZSk7XG4gIGlmICghb2JzdHJ1Y3Rpb25zLmxlbmd0aCkge1xuICAgIGlmIChwaWVjZS50eXBlID09PSAncGF3bicpXG4gICAgICByZXR1cm4gWy4uLmdldFBhd25DYXB0dXJlcyhvcmlnaW4sIGJvYXJkKSwgLi4ucG9zc2libGVNb3Zlc107XG4gICAgcmV0dXJuIHBvc3NpYmxlTW92ZXM7XG4gIH1cblxuICBsZXQgbGVnYWxNb3ZlczogTW92ZXMgPSBbXTtcbiAgc3dpdGNoIChwaWVjZS50eXBlKSB7XG4gICAgY2FzZSAna25pZ2h0Jzoge1xuICAgICAgbGVnYWxNb3ZlcyA9IHBvc3NpYmxlTW92ZXM7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAncGF3bic6IHtcbiAgICAgIGNvbnN0IGNhcHR1cmVzQXZhaWxhYmxlID0gZ2V0UGF3bkNhcHR1cmVzKG9yaWdpbiwgYm9hcmQpO1xuICAgICAgY29uc3QgdW5vYnN0cnVjdGVkTW92ZXMgPSByZW1vdmVNb3Zlc1dpdGhQaWVjZXMoXG4gICAgICAgIHJlbW92ZU9ic3RydWN0ZWRNb3ZlcyhvcmlnaW4sIHBvc3NpYmxlTW92ZXMsIG9ic3RydWN0aW9ucyksXG4gICAgICAgIGJvYXJkXG4gICAgICApO1xuICAgICAgbGVnYWxNb3ZlcyA9IFsuLi5jYXB0dXJlc0F2YWlsYWJsZSwgLi4udW5vYnN0cnVjdGVkTW92ZXNdO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ2tpbmcnOiB7XG4gICAgICBsZWdhbE1vdmVzID0gcmVtb3ZlUHJvdGVjdGVkU3F1YXJlcyhwaWVjZSwgcG9zc2libGVNb3ZlcywgYm9hcmQpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIGxlZ2FsTW92ZXMgPSByZW1vdmVPYnN0cnVjdGVkTW92ZXMob3JpZ2luLCBwb3NzaWJsZU1vdmVzLCBvYnN0cnVjdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZW1vdmVNb3Zlc1dpdGhQaWVjZXMobGVnYWxNb3ZlcywgYm9hcmQsIHBpZWNlLmNvbG9yKTtcbn1cblxuZnVuY3Rpb24gZ2V0TGVnYWxNb3Zlc0luQ2hlY2soXG4gIG9yaWdpbjogU3F1YXJlLFxuICBib2FyZDogQm9hcmQsXG4gIGtpbmdQb3M6IFNxdWFyZSxcbiAgc3F1YXJlR2l2aW5nQ2hlY2s6IFNxdWFyZVxuKSB7XG4gIGNvbnN0IHNxdWFyZXNUaGF0RGVhbFdpdGhDaGVjayA9IGdldFNxdWFyZXNCZXR3ZWVuS2luZ0FuZENoZWNrKFxuICAgIGtpbmdQb3MsXG4gICAgc3F1YXJlR2l2aW5nQ2hlY2ssXG4gICAgQXJyYXkuZnJvbShib2FyZC5rZXlzKCkpXG4gICk7XG5cbiAgY29uc3QgbW92ZXMgPSBnZXRMZWdhbE1vdmVzKG9yaWdpbiwgYm9hcmQpO1xuXG4gIHJldHVybiBtb3Zlcy5maWx0ZXIoKHMpID0+IHNxdWFyZXNUaGF0RGVhbFdpdGhDaGVjay5pbmNsdWRlcyhzKSk7XG59XG5cbmZ1bmN0aW9uIGdldEF0dGFja2luZ01vdmVzKG9yaWdpbjogU3F1YXJlLCBib2FyZDogQm9hcmQpIHtcbiAgLy8gZm9yIHdoZW4geW91IG5lZWQgdG8gY2hlY2sgZm9yIGlmIHNxdWFyZXMgYXJlIHByb3RlY3RlZFxuICBjb25zdCBzcXVhcmUgPSBib2FyZC5nZXQob3JpZ2luKSBhcyBTcXVhcmVPYmo7XG5cbiAgY29uc3QgeyB0eXBlLCBjb2xvciB9ID0gc3F1YXJlLnBpZWNlIGFzIFBpZWNlT2JqO1xuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3Bhd24nOiB7XG4gICAgICBjb25zdCBwaWVjZSA9IFBpZWNlKGNvbG9yLCAncGF3bicpO1xuICAgICAgcmV0dXJuIHBpZWNlLmdldFBhd25DYXB0dXJlcyhvcmlnaW4pIGFzIE1vdmVzO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGdldExlZ2FsTW92ZXMob3JpZ2luLCBib2FyZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0QWxsTW92ZXNGb3JDb2xvcihjb2xvcjogQ29sb3IsIGJvYXJkOiBCb2FyZCk6IE1vdmVzIHtcbiAgY29uc3QgYWxsTW92ZXM6IE1vdmVzW10gPSBbXTtcbiAgZm9yIChjb25zdCBbc3F1YXJlLCB7IHBpZWNlIH1dIG9mIGJvYXJkLmVudHJpZXMoKSkge1xuICAgIGlmICghcGllY2UpIGNvbnRpbnVlO1xuICAgIGlmIChwaWVjZS5jb2xvciAhPT0gY29sb3IpIGNvbnRpbnVlO1xuXG4gICAgYWxsTW92ZXMucHVzaChnZXRMZWdhbE1vdmVzKHNxdWFyZSwgYm9hcmQpKTtcbiAgfVxuXG4gIHJldHVybiBhbGxNb3Zlcy5mbGF0KCk7XG59XG5cbmZ1bmN0aW9uIGdldEF0dGFja2luZ01vdmVzRm9yQ29sb3IoY29sb3I6IENvbG9yLCBib2FyZDogQm9hcmQpOiBNb3ZlcyB7XG4gIGNvbnN0IGFsbE1vdmVzOiBNb3Zlc1tdID0gW107XG4gIGZvciAoY29uc3QgW3NxdWFyZSwgeyBwaWVjZSB9XSBvZiBib2FyZC5lbnRyaWVzKCkpIHtcbiAgICBpZiAoIXBpZWNlKSBjb250aW51ZTtcbiAgICBpZiAocGllY2UuY29sb3IgIT09IGNvbG9yKSBjb250aW51ZTtcblxuICAgIGFsbE1vdmVzLnB1c2goZ2V0QXR0YWNraW5nTW92ZXMoc3F1YXJlLCBib2FyZCkpO1xuICB9XG5cbiAgcmV0dXJuIGFsbE1vdmVzLmZsYXQoKTtcbn1cblxuZnVuY3Rpb24gZ2V0UGF3bkNhcHR1cmVzKHBhd25TcXVhcmU6IFNxdWFyZSwgYm9hcmQ6IEJvYXJkKSB7XG4gIGNvbnN0IHsgY29sb3IgfSA9IGJvYXJkLmdldChwYXduU3F1YXJlKT8ucGllY2UgYXMgUGllY2VPYmo7XG4gIGNvbnN0IHBhd24gPSBQaWVjZShjb2xvciwgJ3Bhd24nKTtcblxuICBjb25zdCBjYXB0dXJlTW92ZXMgPSBwYXduLmdldFBhd25DYXB0dXJlcyhwYXduU3F1YXJlKTtcbiAgaWYgKCFjYXB0dXJlTW92ZXMpIHJldHVybiBbXTtcblxuICByZXR1cm4gY2FwdHVyZU1vdmVzLmZpbHRlcigocykgPT4ge1xuICAgIGNvbnN0IHNxdWFyZVZhbCA9IGJvYXJkLmdldChzKTtcbiAgICBpZiAoIXNxdWFyZVZhbCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgcGllY2UgPSBzcXVhcmVWYWwucGllY2U7XG4gICAgY29uc3QgZW5QYXNzYW50OiBFblBhc3NhbnRPYmogfCB1bmRlZmluZWQgPSBzcXVhcmVWYWwuZW5QYXNzYW50O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIChwaWVjZSAmJiBwaWVjZS5jb2xvciAhPT0gcGF3bi5jb2xvcikgfHxcbiAgICAgIChlblBhc3NhbnQgJiYgZW5QYXNzYW50LmNvbG9yICE9PSBwYXduLmNvbG9yKVxuICAgICk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRTcXVhcmVzQmV0d2VlbktpbmdBbmRDaGVjayhcbiAga2luZ1BvczogU3F1YXJlLFxuICBjaGVja1BvczogU3F1YXJlLFxuICBhbGxTcXVhcmVzOiBNb3Zlc1xuKSB7XG4gIC8vIGluY2x1ZGVzIGtpbmdQb3MgYW5kIGNoZWNrUG9zXG4gIGNvbnN0IHNxdWFyZXNBbG9uZ1ZlY3RvciA9IGdldE1vdmVzQWxvbmdWZWN0b3Ioa2luZ1BvcywgY2hlY2tQb3MsIGFsbFNxdWFyZXMpO1xuICBjb25zdCBzcXVhcmVzQmV0d2VlbktpbmdBbmRQaWVjZSA9IHJlbW92ZU1vdmVzQmVoaW5kVHdvU3F1YXJlcyhcbiAgICBraW5nUG9zLFxuICAgIGNoZWNrUG9zLFxuICAgIHNxdWFyZXNBbG9uZ1ZlY3RvclxuICApO1xuICByZXR1cm4gc3F1YXJlc0JldHdlZW5LaW5nQW5kUGllY2U7XG59XG5cbi8qIGZpbHRlciBtb3ZlcyAqL1xuXG5mdW5jdGlvbiByZW1vdmVNb3Zlc0JlaGluZFR3b1NxdWFyZXMoXG4gIHMxOiBTcXVhcmUsXG4gIHMyOiBTcXVhcmUsXG4gIHZlY3RvcjogTW92ZXNcbik6IE1vdmVzIHtcbiAgY29uc3Qgc29ydGVkID0gc29ydE1vdmVzQ2xvc2VzdFRvKGdldEJlZ2lubmluZ09mVmVjdG9yKHZlY3RvcikpKHZlY3Rvcik7XG4gIGxldCBmdXJ0aGVzdFNxdWFyZTtcbiAgbGV0IGNsb3Nlc3RTcXVhcmU7XG5cbiAgaWYgKHNvcnRlZC5pbmRleE9mKHMxKSA+IHNvcnRlZC5pbmRleE9mKHMyKSkge1xuICAgIGZ1cnRoZXN0U3F1YXJlID0gczE7XG4gICAgY2xvc2VzdFNxdWFyZSA9IHMyO1xuICB9IGVsc2Uge1xuICAgIGZ1cnRoZXN0U3F1YXJlID0gczI7XG4gICAgY2xvc2VzdFNxdWFyZSA9IHMxO1xuICB9XG4gIGNvbnN0IHJlbW92ZWRPbmVFbmQgPSByZW1vdmVNb3Zlc0JlaGluZFNxdWFyZShmdXJ0aGVzdFNxdWFyZSkoc29ydGVkKTtcbiAgY29uc3QgcmVtb3ZlZEJvdGhFbmRzID0gcmVtb3ZlTW92ZXNCZWhpbmRTcXVhcmUoY2xvc2VzdFNxdWFyZSkoXG4gICAgcmVtb3ZlZE9uZUVuZC5yZXZlcnNlKClcbiAgKTtcblxuICByZXR1cm4gcmVtb3ZlZEJvdGhFbmRzO1xufVxuXG5jb25zdCByZW1vdmVNb3Zlc0JlaGluZFNxdWFyZSA9XG4gIChzcXVhcmU6IFNxdWFyZSkgPT5cbiAgKG1vdmVzOiBNb3Zlcyk6IE1vdmVzID0+IHtcbiAgICBjb25zdCBjb3B5ID0gWy4uLm1vdmVzXTtcbiAgICBjb25zdCBpbmRleCA9IG1vdmVzLmluZGV4T2Yoc3F1YXJlKTtcblxuICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiBbXTtcblxuICAgIGNvcHkuc3BsaWNlKGluZGV4ICsgMSk7XG5cbiAgICByZXR1cm4gY29weTtcbiAgfTtcblxuZnVuY3Rpb24gcmVtb3ZlT2JzdHJ1Y3RlZE1vdmVzKFxuICBzdGFydGluZ1NxdWFyZTogU3F1YXJlLFxuICBwb3NzaWJsZU1vdmVzOiBNb3ZlcyxcbiAgb2JzdHJ1Y3Rpb25zOiBNb3Zlc1xuKTogTW92ZXMge1xuICAvLyBhKSBzcGxpdCBwb3NzaWJsZSBtb3ZlcyBpbnRvIHZlY3RvcnMgKHVwLGRvd24sbGVmdCxyaWdodCwgYW5kL29yIGRpYWdvbmFscylcbiAgLy8gYikgc2VlIHdoaWNoIG9ic3RydWN0aW9ucyBiZWxvbmcgdG8gd2hpY2ggdmVjdG9yXG4gIC8vIGMpIGZpbmQgdGhlIGNsb3Nlc3Qgb2JzdHJ1Y3Rpb25cbiAgLy8gZCkgcmVtb3ZlIGFsbCB0aGUgbW92ZXMgYmVoaW5kIHRoYXQgb2JzdHJ1Y3Rpb25cblxuICBjb25zdCBmaWx0ZXJlZE1vdmVzOiBNb3Zlc1tdID0gW107XG5cbiAgY29uc3QgYWxsVmVjdG9ycyA9IHNwbGl0SW50b1ZlY3RvcnMocG9zc2libGVNb3Zlcywgc3RhcnRpbmdTcXVhcmUpO1xuICBjb25zdCBvYnN0cnVjdGlvblZlY3RvcnMgPSBzcGxpdEludG9WZWN0b3JzKG9ic3RydWN0aW9ucywgc3RhcnRpbmdTcXVhcmUpO1xuICBmb3IgKGNvbnN0IHZlY3RvciBpbiBhbGxWZWN0b3JzKSB7XG4gICAgaWYgKCFvYnN0cnVjdGlvblZlY3RvcnNbdmVjdG9yXSkge1xuICAgICAgLy8gbG9vayBmb3IgdmVjdG9yIG9ic3RydWN0aW9uIGlzIG9uXG4gICAgICBmaWx0ZXJlZE1vdmVzLnB1c2goYWxsVmVjdG9yc1t2ZWN0b3JdKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHNvcnRlZCA9IHNvcnRNb3Zlc0Nsb3Nlc3RUbyhzdGFydGluZ1NxdWFyZSkoYWxsVmVjdG9yc1t2ZWN0b3JdKTtcbiAgICBjb25zdCBjbG9zZXN0T2JzdHJ1Y3Rpb24gPSBzb3J0TW92ZXNDbG9zZXN0VG8oc3RhcnRpbmdTcXVhcmUpKFxuICAgICAgb2JzdHJ1Y3Rpb25WZWN0b3JzW3ZlY3Rvcl1cbiAgICApWzBdO1xuXG4gICAgZmlsdGVyZWRNb3Zlcy5wdXNoKHJlbW92ZU1vdmVzQmVoaW5kU3F1YXJlKGNsb3Nlc3RPYnN0cnVjdGlvbikoc29ydGVkKSk7XG4gIH1cblxuICByZXR1cm4gZmlsdGVyZWRNb3Zlcy5mbGF0KCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVByb3RlY3RlZFNxdWFyZXMoXG4gIGtpbmc6IFBpZWNlT2JqLFxuICBwb3NzaWJsZU1vdmVzOiBNb3ZlcyxcbiAgYm9hcmQ6IEJvYXJkXG4pOiBNb3ZlcyB7XG4gIC8vIGJjIGtpbmcgY2FudCBtb3ZlIGlmIHNxdWFyZSBpcyBwcm90ZWN0ZWRcbiAgY29uc3Qgb3BwQ29sb3IgPSBraW5nLmNvbG9yID09PSAnd2hpdGUnID8gJ2JsYWNrJyA6ICd3aGl0ZSc7XG5cbiAgY29uc3QgYWxsRW5lbXlNb3ZlcyA9IGdldEF0dGFja2luZ01vdmVzRm9yQ29sb3Iob3BwQ29sb3IsIGJvYXJkKTtcbiAgcmV0dXJuIHBvc3NpYmxlTW92ZXMuZmlsdGVyKChzKSA9PiB7XG4gICAgcmV0dXJuICFhbGxFbmVteU1vdmVzLmluY2x1ZGVzKHMpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlTW92ZXNXaXRoUGllY2VzKFxuICBtb3ZlczogTW92ZXMsXG4gIGJvYXJkOiBCb2FyZCxcbiAgY29sb3I/OiBDb2xvclxuKTogTW92ZXMge1xuICByZXR1cm4gbW92ZXMuZmlsdGVyKChzKSA9PiB7XG4gICAgY29uc3Qgc3F1YXJlVmFsID0gYm9hcmQuZ2V0KHMpO1xuICAgIGlmICghc3F1YXJlVmFsKSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAoY29sb3IpIHJldHVybiAhc3F1YXJlVmFsLnBpZWNlIHx8IHNxdWFyZVZhbC5waWVjZS5jb2xvciAhPT0gY29sb3I7XG4gICAgZWxzZSByZXR1cm4gIXNxdWFyZVZhbC5waWVjZTtcbiAgfSk7XG59XG5cbi8qIGdhbWVib2FyZCBjaGVja3MgKi9cblxuZnVuY3Rpb24gZ2V0RGlzY292ZXJlZENoZWNrKFxuICBraW5nUG9zOiBTcXVhcmUsXG4gIGtpbmdDb2xvcjogQ29sb3IsXG4gIHZhY2F0ZWQ6IFNxdWFyZSxcbiAgYm9hcmQ6IEJvYXJkXG4pOiBTcXVhcmUge1xuICAvLyBvcGVuU3F1YXJlIGlzIGEgc3F1YXJlIGp1c3QgdmFjYXRlZFxuICBsZXQgc3F1YXJlc0Fsb25nVmVjdG9yID0gZ2V0TW92ZXNBbG9uZ1ZlY3RvcihcbiAgICBraW5nUG9zLFxuICAgIHZhY2F0ZWQsXG4gICAgQXJyYXkuZnJvbShib2FyZC5rZXlzKCkpXG4gICk7XG4gIHNxdWFyZXNBbG9uZ1ZlY3RvciA9IHNxdWFyZXNBbG9uZ1ZlY3Rvci5maWx0ZXIoXG4gICAgKHMpID0+IHMgIT09IGtpbmdQb3MgJiYgcyAhPT0gdmFjYXRlZFxuICApO1xuICBpZiAoIXNxdWFyZXNBbG9uZ1ZlY3Rvci5sZW5ndGgpIHJldHVybiAnJztcblxuICBmb3IgKGNvbnN0IHNxdWFyZSBvZiBzcXVhcmVzQWxvbmdWZWN0b3IpIHtcbiAgICBjb25zdCBwaWVjZSA9IGJvYXJkLmdldChzcXVhcmUpPy5waWVjZTtcbiAgICBpZiAoIXBpZWNlIHx8IHBpZWNlLmNvbG9yID09PSBraW5nQ29sb3IpIGNvbnRpbnVlO1xuXG4gICAgY29uc3QgbGVnYWxNb3ZlcyA9IGdldExlZ2FsTW92ZXMoc3F1YXJlLCBib2FyZCk7XG4gICAgaWYgKGxlZ2FsTW92ZXMuaW5jbHVkZXMoa2luZ1BvcykpIHJldHVybiBzcXVhcmU7XG4gIH1cblxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIGNhbkJsb2NrT3JDYXB0dXJlQ2hlY2soXG4gIGtpbmdQb3M6IFNxdWFyZSxcbiAgc3F1YXJlR2l2aW5nQ2hlY2s6IFNxdWFyZSxcbiAgYm9hcmQ6IEJvYXJkXG4pOiBib29sZWFuIHtcbiAgY29uc3Qga2luZyA9IGJvYXJkLmdldChraW5nUG9zKT8ucGllY2UgYXMgUGllY2VPYmo7XG5cbiAgY29uc3QgYmxvY2tPckNhcHR1cmVTcXVhcmVzID0gZ2V0U3F1YXJlc0JldHdlZW5LaW5nQW5kQ2hlY2soXG4gICAga2luZ1BvcyxcbiAgICBzcXVhcmVHaXZpbmdDaGVjayxcbiAgICBBcnJheS5mcm9tKGJvYXJkLmtleXMoKSlcbiAgKTsgLy8gYWxzbyBpbmNsdWRlcyBjaGVjayBzcXVhcmVcblxuICBjb25zdCBvd25QaWVjZU1vdmVzID0gZ2V0QWxsTW92ZXNGb3JDb2xvcihraW5nLmNvbG9yLCBib2FyZCk7XG4gIHJldHVybiBvd25QaWVjZU1vdmVzLnNvbWUoKG1vdmUpID0+IGJsb2NrT3JDYXB0dXJlU3F1YXJlcy5pbmNsdWRlcyhtb3ZlKSk7XG59XG5cbmV4cG9ydCB7XG4gIGdldEF0dGFja2luZ01vdmVzRm9yQ29sb3IsXG4gIGdldExlZ2FsTW92ZXMsXG4gIGdldExlZ2FsTW92ZXNJbkNoZWNrLFxuICBnZXREaXNjb3ZlcmVkQ2hlY2ssXG4gIGNhbkJsb2NrT3JDYXB0dXJlQ2hlY2tcbn07XG4iXSwibmFtZXMiOlsiY2FsY0Rpc3RhbmNlIiwidG9YWSIsIlBpZWNlIiwibW92ZXMiLCJ2ZXJ0QW5kTGF0ZXJhbCIsImZyb20iLCJ0byIsIngxIiwieTEiLCJzcGxpdCIsIngyIiwieTIiLCJkaWFnb25hbCIsIngiLCJ5IiwiTWF0aCIsImFicyIsInhCeU4iLCJudW0iLCJ5QnlOIiwic3BsaXRJbnRvVmVjdG9ycyIsImFycmF5T2ZNb3ZlcyIsInN0YXJ0IiwicmVkdWNlIiwiYWNjIiwiY3VyciIsInhEaWZmIiwieURpZmYiLCJ2ZWN0b3IiLCJjaGFyQXQiLCJ0b0xvd2VyQ2FzZSIsInNsaWNlIiwicHVzaCIsImdldEJlZ2lubmluZ09mVmVjdG9yIiwibGVuZ3RoIiwiYWNjSXNCZWdpbm5pbmciLCJnZXRNb3Zlc0Fsb25nVmVjdG9yIiwiczEiLCJzMiIsImFsbFNxdWFyZXMiLCJsaWVzU2FtZVZlcnRPckxhdCIsImxpZXNTYW1lRGlhZ29uYWxseSIsImxpZXNPblNhbWVMaW5lIiwibWF0Y2hpbmdWZWN0b3IiLCJzcXVhcmVzQWxvbmdWZWN0b3IiLCJmaWx0ZXIiLCJzIiwic29ydE1vdmVzQ2xvc2VzdFRvIiwic3F1YXJlIiwic29ydCIsImEiLCJiIiwieDFEaWZmIiwieTFEaWZmIiwiYURpZmYiLCJ4MkRpZmYiLCJ5MkRpZmYiLCJiRGlmZiIsImdldFBvc3NpYmxlTW92ZXMiLCJvcmlnaW4iLCJib2FyZCIsIkFycmF5Iiwia2V5cyIsImdldCIsInR5cGUiLCJjb2xvciIsInBpZWNlIiwiaGFzTW92ZSIsImdldExlZ2FsTW92ZXMiLCJwb3NzaWJsZU1vdmVzIiwib2JzdHJ1Y3Rpb25zIiwiX2EiLCJnZXRQYXduQ2FwdHVyZXMiLCJsZWdhbE1vdmVzIiwiY2FwdHVyZXNBdmFpbGFibGUiLCJ1bm9ic3RydWN0ZWRNb3ZlcyIsInJlbW92ZU1vdmVzV2l0aFBpZWNlcyIsInJlbW92ZU9ic3RydWN0ZWRNb3ZlcyIsInJlbW92ZVByb3RlY3RlZFNxdWFyZXMiLCJnZXRMZWdhbE1vdmVzSW5DaGVjayIsImtpbmdQb3MiLCJzcXVhcmVHaXZpbmdDaGVjayIsInNxdWFyZXNUaGF0RGVhbFdpdGhDaGVjayIsImdldFNxdWFyZXNCZXR3ZWVuS2luZ0FuZENoZWNrIiwiaW5jbHVkZXMiLCJnZXRBdHRhY2tpbmdNb3ZlcyIsImdldEFsbE1vdmVzRm9yQ29sb3IiLCJhbGxNb3ZlcyIsImVudHJpZXMiLCJmbGF0IiwiZ2V0QXR0YWNraW5nTW92ZXNGb3JDb2xvciIsInBhd25TcXVhcmUiLCJwYXduIiwiY2FwdHVyZU1vdmVzIiwic3F1YXJlVmFsIiwiZW5QYXNzYW50IiwiY2hlY2tQb3MiLCJzcXVhcmVzQmV0d2VlbktpbmdBbmRQaWVjZSIsInJlbW92ZU1vdmVzQmVoaW5kVHdvU3F1YXJlcyIsInNvcnRlZCIsImZ1cnRoZXN0U3F1YXJlIiwiY2xvc2VzdFNxdWFyZSIsImluZGV4T2YiLCJyZW1vdmVkT25lRW5kIiwicmVtb3ZlTW92ZXNCZWhpbmRTcXVhcmUiLCJyZW1vdmVkQm90aEVuZHMiLCJyZXZlcnNlIiwiY29weSIsImluZGV4Iiwic3BsaWNlIiwic3RhcnRpbmdTcXVhcmUiLCJmaWx0ZXJlZE1vdmVzIiwiYWxsVmVjdG9ycyIsIm9ic3RydWN0aW9uVmVjdG9ycyIsImNsb3Nlc3RPYnN0cnVjdGlvbiIsImtpbmciLCJvcHBDb2xvciIsImFsbEVuZW15TW92ZXMiLCJnZXREaXNjb3ZlcmVkQ2hlY2siLCJraW5nQ29sb3IiLCJ2YWNhdGVkIiwiY2FuQmxvY2tPckNhcHR1cmVDaGVjayIsImJsb2NrT3JDYXB0dXJlU3F1YXJlcyIsIm93blBpZWNlTW92ZXMiLCJzb21lIiwibW92ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils/moves.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.ts");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});